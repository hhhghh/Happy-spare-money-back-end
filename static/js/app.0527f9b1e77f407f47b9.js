webpackJsonp([1],{"++JQ":function(t,e){},"+skl":function(t,e){},"3V7G":function(t,e){},A8Ev:function(t,e){},BjOK:function(t,e){},Edhj:function(t,e){},G18S:function(t,e){},Hrq5:function(t,e){},HvuP:function(t,e){},IMS4:function(t,e){},JvdK:function(t,e){},KzvB:function(t,e){},LOC2:function(t,e){},M4bn:function(t,e){},MPSL:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},s,!1,function(t){a("3V7G")},null,null).exports,i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("router-link",{attrs:{to:"/MainPage"}},[a("Button",[t._v("to")])],1),t._v(" "),a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var o=a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},i,!1,function(t){a("tU/7")},"data-v-0faf9080",null).exports,r={inject:["reload"],data:function(){return{username:"abc",task_id:"",isReleaser:!1,isAcceptor:!1,acceptorBtnMsg:"",isDoing:!0,isCompleted:!1,isOver:!1,drawerDisplay:!1,scoreValue:0,trs:[],avatar:"",task:{title:"xxxxxx问卷调查",introduction:"可能会发生这样的情况：当一个道具在激活状态时，另一个道具与挡板发生了接触。在这种情况下我们有超过1个在当前PowerUps容器中处于激活状态的道具。然后，当这些道具中的一个被停用时，我们不应使其效果失效因为另一个相同类型的道具仍处于激活状态。出于这个原因，我们使用isOtherPowerUpActive检查是否有同类道具处于激活状态。只有当它返回false时，我们才停用这个道具的效果。这样，给定类型的道具的持续时间就可以延长至最近一次被激活后的持续时间。",money:12,max_accepter_number:10,publisher:"Howlyao",state:1,score:3.5,type:2,starttime:"",endtime:"",content:""},completeRateData:[{username:"Howlyao",state:"waiting"},{username:"User",state:"completed"}]}},mounted:function(){this.task_id=this.$route.params.id,this.getTaskDetail()},methods:{getTaskDetail:function(){var t=this;this.$axios.get("/api/v1/task/findByTaskId",{params:{task_id:t.task_id}}).then(function(e){var a=e.data;if(console.log(a),200==a.code){var s=a.data;1==s.type?s.type="问卷调查":s.type="跑腿",t.task=s,t.setCharactor(),t.getUserInfo()}}).catch(function(t){console.log("error")})},getUserInfo:function(){var t=this;this.$axios.get("/api/v1/user/getuser",{params:{username:t.username}}).then(function(e){var a=e.data;200==a.code&&(console.log(a),t.avatar=a.data.avatar)}).catch(function(t){console.log("error")})},setCharactor:function(){var t=this,e=t.task;if(t.getTaskRelation(),e.publisher==t.username)t.isReleaser=!0,2==e.state?t.isCompleted=!0:t.isCompleted=!1;else{this.$axios.get("/api/v1/task/acceptance",{params:{task_id:t.task_id,username:t.username}}).then(function(e){var a=e.data.data;""==a?t.isAcceptor=!1:(t.trs=a[0],t.isAcceptor=!0,1==t.trs.state?(t.acceptorBtnMsg="等待核实",t.isDoing=!1):2==t.trs.state&&(t.acceptorBtnMsg="已完成",t.isDoing=!1),2==t.trs.state&&(t.isCompleted=!0))}).catch(function(t){console.log("error")})}},acceptTask:function(){var t=this;this.$axios.post("/api/v1/task/acceptance",{headers:{accept:"application/json","Content-Type":"application/json"},username:t.username,task_id:t.task.task_id}).then(function(e){var a=e.data;if(200==a.code)t.$Notice.success({title:"Task Acceptance",desc:"Accept the task successfully."}),t.reload();else{var s=a.data;t.$Notice.warning({title:"Task Acceptance",desc:s}),t.reload()}}).catch(function(t){console.log("Fail to accept task")})},completeTask:function(){if("问卷调查"==this.task.type){this.$router.push({name:"questionnaire",params:{url:"http://localhost:3000/uploads/questionnaire/f08edd9a08d95.json"}})}else{var t=this;this.$axios.post("/api/v1/task/complement",{task_id:t.task_id,username:t.username}).then(function(e){console.log(e.data),t.$Notice.success({title:"Task Complement",desc:"Waiting for cofirming."}),t.reload()}).catch(function(t){console.log("error")})}},quitingTask:function(){var t=this;this.$axios.delete("/api/v1/task/acceptance",{params:{username:t.username,task_id:t.task.task_id}}).then(function(e){console.log(e.data),t.$Notice.success({title:"Task Quiting",desc:"Quiting the task successfully."}),t.reload()}).catch(function(t){})},cancelTask:function(){var t=this;this.$axios.delete("/api/v1/task",{params:{task_id:t.task_id}}).then(function(e){var a=e.data;200==a.code&&(console.log(a),t.$Notice.success({title:"Task Canceling",desc:"Cancel the task successfully."}),t.$router.push({path:"/MainPage/taskSearch"}))}).catch(function(t){console("cancel error")})},getTaskRelation:function(){var t=this;this.$axios.get("/api/v1/task/accepter",{params:{task_id:t.task_id}}).then(function(e){var a=e.data;if(200==a.code){var s=a.data;console.log(s);for(var n=0;n<s.length;n++)0==s[n].state?s[n].label="正在做":1==s[n].state?s[n].label="等待核实":2==s[n].state&&(s[n].label="已完成"),s[n].avatar=s[n].trs[0].avatar;s.length>=t.task.max_accepter_number&&(t.isOver=!0),t.trs=s}}).catch(function(t){console.log("error")})},confirmTaskComplement:function(t,e,a){var s=this;this.$axios.post("/api/v1/task/comfirm",{username:t,score:e,task_id:s.task_id}).then(function(t){if(console.log(e),200==t.data.code){if(s.$Notice.success({title:"Task Confirm",desc:"Confirm successfully."}),s.trs[a].state=2,s.trs[a].label="已完成",s.trs.length<s.task.max_accepter_number)return void(s.isCompleted=!1);for(var n=!0,i=0;i<s.trs.length;i++)if(2!=s.trs[i].state){n=!1;break}n&&(s.isCompleted=!0)}}).catch(function(t){console.log("error")})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-body"},[a("div",{staticClass:"task-detail-body"},[a("div",{staticClass:"drawer-btn"},[a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isReleaser,expression:"isReleaser"}],attrs:{type:"info"},on:{click:function(e){t.drawerDisplay=!0}}},[t._v("任务完成度")])],1),t._v(" "),a("h1",{staticStyle:{"font-size":"28px"},attrs:{id:"title"}},[t._v("任务信息")]),t._v(" "),a("div",{staticClass:"detail-body"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isAcceptor&&t.isCompleted,expression:"isAcceptor && isCompleted "}],staticClass:"div-score"},[a("p",{staticStyle:{"font-size":"18px","font-weight":"bold"}},[t._v("评分")]),t._v(" "),a("Rate",{attrs:{disabled:""},model:{value:t.trs.score,callback:function(e){t.$set(t.trs,"score",e)},expression:"trs.score"}})],1),t._v(" "),a("div",{staticClass:"detail"},[a("div",{staticClass:"div-taskInfo-item"},[a("h1",[t._v("标题 ")]),t._v(" "),a("p",[t._v(t._s(t.task.title))])]),t._v(" "),a("div",{staticClass:"div-taskInfo-item"},[a("h1",{attrs:{id:"type"}},[t._v("类型")]),t._v(" "),a("p",[t._v(t._s(t.task.type)+" ")])]),t._v(" "),a("div",{staticClass:"div-taskInfo-item"},[a("h1",{attrs:{id:"intro"}},[t._v("简介")]),t._v(" "),a("p",[t._v(t._s(t.task.introduction)+" ")])]),t._v(" "),a("div",{staticClass:"tack-releaser div-taskInfo-item"},[a("h2",{attrs:{id:"releaser"}},[t._v("发布人")]),t._v(" "),a("Avatar",{attrs:{src:t.avatar}}),t._v(" "),a("span",[t._v(t._s(t.task.releaser)+" ")])],1),t._v(" "),a("div",{staticClass:"task-time div-taskInfo-item"},[a("h1",{attrs:{id:"time"}},[t._v("任务时间")]),t._v(" "),a("div",{staticClass:"task-starttime"},[a("span",[t._v("开始时间: ")]),t._v(" "),a("span",[t._v(t._s(t.task.starttime)+" ")])]),t._v(" "),a("div",{staticClass:"task-endtime"},[a("span",[t._v("截止时间: ")]),t._v(" "),a("span",[t._v(t._s(t.task.endtime)+" ")])])]),t._v(" "),a("div",{staticClass:"div-taskInfo-item",staticStyle:{display:"flex"}},[a("div",[a("h1",{attrs:{id:"profit"}},[t._v("奖赏")]),t._v(" "),a("span",[t._v(t._s(t.task.money))]),t._v(" "),a("Icon",{attrs:{type:"logo-yen"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isReleaser,expression:"isReleaser"}],staticStyle:{"margin-left":"250px"}},[a("h1",[t._v("数量")]),t._v(" "),a("span",[t._v(t._s(t.task.max_accepter_number))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isReleaser,expression:"isReleaser"}],staticStyle:{"margin-left":"250px"}},[a("h1",[t._v("接受评分要求")]),t._v(" "),a("Rate",{attrs:{"allow-half":"","show-text":"",disabled:""},model:{value:t.task.score,callback:function(e){t.$set(t.task,"score",e)},expression:"task.score"}},[a("span",{staticStyle:{color:"#f5a623",position:"relative",bottom:"2px"}},[t._v(t._s(t.task.score))])])],1)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isAcceptor||t.isReleaser,expression:"isAcceptor || isReleaser"}],staticClass:"accepted-detail-body",attrs:{id:"requirement"}},[a("div",{staticClass:"releaser-info"},[a("h2",[t._v("具体要求与联系方式")]),t._v(" "),a("p",[t._v(t._s(t.task.content))])])]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Button",{directives:[{name:"show",rawName:"v-show",value:!t.isAcceptor&&!t.isReleaser,expression:"!isAcceptor && !isReleaser"}],staticClass:"btn",attrs:{type:"success",long:"",disabled:t.isOver},on:{click:function(e){return t.acceptTask()}}},[t._v("接受任务")]),t._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isAcceptor&&t.isDoing,expression:"isAcceptor && isDoing"}],staticClass:"btn",attrs:{type:"primary",long:""},on:{click:function(e){return t.completeTask()}}},[t._v("完成任务")]),t._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isAcceptor&&t.isDoing,expression:"isAcceptor && isDoing"}],staticClass:"btn",attrs:{type:"error",long:""},on:{click:function(e){return t.quitingTask()}}},[t._v("放弃任务")]),t._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isAcceptor&&!t.isDoing,expression:"isAcceptor && !isDoing"}],staticClass:"btn",attrs:{type:"success",long:""}},[t._v(t._s(t.acceptorBtnMsg))]),t._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isReleaser&&!t.isCompleted,expression:"isReleaser && !isCompleted"}],staticClass:"btn",attrs:{type:"error",long:"",disabled:t.trs.length>0},on:{click:function(e){return t.cancelTask()}}},[t._v("取消任务")]),t._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isReleaser&&t.isCompleted,expression:"isReleaser && isCompleted"}],staticClass:"btn",attrs:{type:"success",long:""}},[t._v("已完成")])],1)]),t._v(" "),a("Drawer",{attrs:{title:"完成度",width:"480",closable:!1},model:{value:t.drawerDisplay,callback:function(e){t.drawerDisplay=e},expression:"drawerDisplay"}},[a("div",{staticClass:"table-whole"},[a("div",{staticClass:"div-table-body"},[a("div",{staticClass:"table-header"},[a("table",{staticStyle:{width:"470px"},attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[a("thead",[a("tr",[a("th",{attrs:{width:"163"}},[a("div",{staticClass:"header-th"},[a("span",[t._v("User")])])]),t._v(" "),a("th",{attrs:{width:"163"}},[a("div",{staticClass:"header-th"},[a("span",[t._v("State")])])]),t._v(" "),a("th",{attrs:{width:"120"}},[a("div",{staticClass:"header-th"},[a("span",[t._v("Action")])])])])])])]),t._v(" "),a("div",{staticClass:"table-body"},[a("table",{staticStyle:{width:"470px"},attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[a("tbody",t._l(t.trs,function(e,s){return a("tr",[a("td",{attrs:{width:"163"}},[a("div",{staticClass:"header-th"},[a("Avatar",{attrs:{src:e.avatar}}),t._v(" "),a("strong",[t._v(t._s(e.username))])],1)]),t._v(" "),a("td",{attrs:{width:"163"}},[a("div",{staticClass:"header-th"},[a("span",[t._v(t._s(e.label))])])]),t._v(" "),a("td",{attrs:{width:"120"}},[a("div",{staticClass:"header-th"},[a("Poptip",{attrs:{placement:"bottom-end"}},[a("Button",{attrs:{type:"primary",size:"small",disabled:1!=e.state}},[t._v("确认完成")]),t._v(" "),a("div",{staticClass:"div-evaluation",attrs:{slot:"content"},slot:"content"},[a("span",{staticClass:"span-score"},[t._v("评分")]),t._v(" "),a("Rate",{model:{value:t.scoreValue,callback:function(e){t.scoreValue=e},expression:"scoreValue"}}),t._v(" "),a("Button",{attrs:{type:"info",size:"small",disabled:2==e.state},on:{click:function(a){return t.confirmTaskComplement(e.username,t.scoreValue,s)}}},[t._v("确认")])],1)],1)],1)])])}),0)])])])])]),t._v(" "),a("div",{staticClass:"div-anchor-body"},[a("div",{staticClass:"div-anchor"},[a("Anchor",{attrs:{"show-ink":""}},[a("AnchorLink",{attrs:{href:"#title",title:"标题"}}),t._v(" "),a("AnchorLink",{attrs:{href:"#type",title:"类型"}}),t._v(" "),a("AnchorLink",{attrs:{href:"#intro",title:"简介"}}),t._v(" "),a("AnchorLink",{attrs:{href:"#releaser",title:"发布人"}}),t._v(" "),a("AnchorLink",{attrs:{href:"#time",title:"任务时间"}}),t._v(" "),a("AnchorLink",{attrs:{href:"#profit",title:"奖赏"}}),t._v(" "),a("AnchorLink",{attrs:{href:"#requirement",title:"具体要求"}})],1)],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("MPSL")},"data-v-557234dc",null).exports,u={data:function(){return{username:"yao",taskType:[{value:"all",label:"全部"},{value:1,label:"问卷调查"},{value:2,label:"跑腿"}],rangeType:[{value:"all",label:"全部"}],stateType:[{value:"all",label:"全部"},{value:0,label:"正在做"},{value:1,label:"等待核实"},{value:3,label:"已完成"}],typeSelect:"all",rangeSelect:"all",stateSelect:"all",enterItemId:"",taskItems:[]}},mounted:function(){this.getGroup(),this.getReleaseTask(this.typeSelect,this.rangeSelect,this.stateSelect)},methods:{isComplete:function(t){return 2==t},isWaiting:function(t){return 1==t},isEnter:function(t){return t==this.enterItemId},getGroup:function(){var t=this;this.$axios.get("/api/v1/team/MemberName",{params:{member_username:t.username}}).then(function(e){var a=e.data;if(200==a.code)for(var s=a.data,n=0;n<s.length;n++)t.rangeType.push({value:s[n].team_id,label:s[n].team_name+"--"+s[n].leader})}).catch(function(t){console.log("Fail to request")})},getReleaseTask:function(t,e,a){var s=this,n=!1;1!=a&&"all"!=a||(a="all",n=!0),this.$axios.get("/api/v1/task/findByPublisher",{params:{type:t,range:e,state:a,publisher:s.username}}).then(function(t){var e=t.data;if(console.log(e),200==e.code){for(var a=e.data,i=0;i<a.length;i++)if(1==a[i].type?a[i].type="问卷调查":2==a[i].type&&(a[i].type="跑腿"),n)for(var o=a[i].trs,r=0;r<o.length;r++)if(1==o[r].state){a[i].state=1;break}s.taskItems=a}}).catch(function(t){console.log("error")})},jumpToTaskDetail:function(t){this.$router.push({path:"/MainPage/taskDetail/"+t})},isShow:function(t,e){return"all"==t||e==t}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-body"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-selector-block"},[s("div",{staticClass:"div-selectors"},[s("div",{staticClass:"selector"},[s("span",{staticClass:"selector-span"},[t._v("任务类型")]),t._v(" "),s("Select",{staticStyle:{width:"100px","margin-right":"5px"},on:{"on-change":function(e){return t.getReleaseTask(t.typeSelect,t.rangeSelect,t.stateSelect)}},model:{value:t.typeSelect,callback:function(e){t.typeSelect=e},expression:"typeSelect"}},t._l(t.taskType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),s("div",{staticClass:"selector"},[s("span",{staticClass:"selector-span"},[t._v("任务发布范围")]),t._v(" "),s("Select",{staticStyle:{width:"100px","margin-right":"5px"},on:{"on-change":function(e){return t.getReleaseTask(t.typeSelect,t.rangeSelect,t.stateSelect)}},model:{value:t.rangeSelect,callback:function(e){t.rangeSelect=e},expression:"rangeSelect"}},t._l(t.rangeType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),s("div",{staticClass:"selector"},[s("span",{staticClass:"selector-span"},[t._v("任务状态")]),t._v(" "),s("Select",{staticStyle:{width:"100px","margin-right":"5px"},on:{"on-change":function(e){return t.getReleaseTask(t.typeSelect,t.rangeSelect,t.stateSelect)}},model:{value:t.stateSelect,callback:function(e){t.stateSelect=e},expression:"stateSelect"}},t._l(t.stateType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)]),t._v(" "),t._m(0)]),t._v(" "),s("Divider"),t._v(" "),s("div",{staticClass:"task-content"},t._l(t.taskItems,function(e){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow(t.stateSelect,e.state),expression:"isShow(stateSelect, item.state)"}],staticClass:"task-item",class:{completed:t.isComplete(e.state),"completed-mouseenter":t.isEnter(e.task_id)&&t.isComplete(e.state),waiting:t.isWaiting(e.state),"waiting-mouseenter":t.isEnter(e.task_id)&&t.isWaiting(e.state),"item-mouseenter":t.isEnter(e.task_id)},on:{mouseenter:function(a){t.enterItemId=e.task_id},mouseleave:function(e){t.enterItemId=""},click:function(a){return t.jumpToTaskDetail(e.task_id)}}},[s("div",{staticClass:"task-title"},[s("span",[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"task-type"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("任务类型:")]),t._v(" "),s("span",[t._v(t._s(e.type)+" ")])]),t._v(" "),s("div",{staticClass:"task-endtime"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("截止时间:")]),t._v(" "),s("span",[t._v(t._s(e.endtime)+" ")])]),t._v(" "),s("div",{staticClass:"task-money"},[s("img",{staticClass:"coin",attrs:{src:a("bNU1")}}),t._v(" "),s("span",{staticClass:"span-money"},[t._v(t._s(e.money))])]),t._v(" "),s("div",{staticClass:"task-number"},[s("Icon",{attrs:{type:"ios-copy",size:"18"}}),t._v(" "),s("span",[t._v(t._s(e.max_accepter_number))])],1)])}),0)],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"state-type-hint",staticStyle:{display:"flex"}},[a("div",{staticClass:"div-box"},[a("div",{staticClass:"box green-state-box"}),t._v(" "),a("span",[t._v("已完成")])]),t._v(" "),a("div",{staticClass:"div-box"},[a("div",{staticClass:"box yellow-state-box"}),t._v(" "),a("span",[t._v("待审核")])]),t._v(" "),a("div",{staticClass:"div-box"},[a("div",{staticClass:"box blue-state-box"}),t._v(" "),a("span",[t._v("正在做")])])])}]};var p=a("VU/8")(u,d,!1,function(t){a("NsOP")},"data-v-4f63078b",null).exports,m={data:function(){return{username:"yao",taskType:[{value:"all",label:"全部"},{value:1,label:"问卷调查"},{value:2,label:"跑腿"}],rangeType:[{value:"all",label:"全部"}],stateType:[{value:"all",label:"全部"},{value:0,label:"正在做"},{value:1,label:"等待核实"},{value:2,label:"已完成"}],typeSelect:"all",rangeSelect:"all",stateSelect:"all",enterItemId:"",taskItems:[{id:1,title:"xxx问卷调查",endtime:"2019-05-01 23:00",money:1,state:0,type:"问卷调查",max_accepter_number:2,user:{username:"yao",avatar:"http://139.196.79.193:3000/awesomeface.png"}},{id:2,title:"xxx取快递",endtime:"2019-05-01 23:00",money:2,type:"取快递",state:2,max_accepter_number:1,user:{username:"yao",avatar:"http://139.196.79.193:3000/awesomeface.png"}},{id:3,title:"xxx取快递",endtime:"2019-05-01 23:00",money:2,type:"取快递",state:1,max_accepter_number:1,user:{username:"yao",avatar:"http://139.196.79.193:3000/awesomeface.png"}}]}},mounted:function(){this.getGroup(),this.getAcceptTask(this.typeSelect,this.rangeSelect,this.stateSelect)},methods:{isComplete:function(t){return null!=t&&2==t[0].state},isWaiting:function(t){return null!=t&&1==t[0].state},isEnter:function(t){return t==this.enterItemId},getGroup:function(){var t=this;this.$axios.get("/api/v1/team/MemberName",{params:{member_username:t.username}}).then(function(e){var a=e.data;if(200==a.code)for(var s=a.data,n=0;n<s.length;n++)t.rangeType.push({value:s[n].team_id,label:s[n].team_name+"--"+s[n].leader})}).catch(function(t){console.log("Fail to request")})},getAcceptTask:function(t,e,a){var s=this;this.$axios.get("/api/v1/task/findByAccepter",{params:{type:t,range:e,state:"all",username:s.username}}).then(function(t){s.taskItems=[];var e=t.data;if(200==e.code){for(var a=e.data,n=0;n<a.length;n++)1==a[n].type?a[n].type="问卷调查":2==a[n].type&&(a[n].type="跑腿");s.taskItems=a}}).catch(function(t){console.log("error")})},jumpToTaskDetail:function(t){this.$router.push({path:"/api/v1/MainPage/taskDetail/"+t})},isShow:function(t,e){return"all"==t||null==e||t==e[0].state}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-body"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-selector-block"},[s("div",{staticClass:"div-selectors"},[s("div",{staticClass:"selector"},[s("span",{staticClass:"selector-span"},[t._v("任务类型")]),t._v(" "),s("Select",{staticStyle:{width:"100px","margin-right":"5px"},on:{"on-change":function(e){return t.getAcceptTask(t.typeSelect,t.rangeSelect,t.stateSelect)}},model:{value:t.typeSelect,callback:function(e){t.typeSelect=e},expression:"typeSelect"}},t._l(t.taskType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),s("div",{staticClass:"selector"},[s("span",{staticClass:"selector-span"},[t._v("任务发布范围")]),t._v(" "),s("Select",{staticStyle:{width:"100px","margin-right":"5px"},on:{"on-change":function(e){return t.getAcceptTask(t.typeSelect,t.rangeSelect,t.stateSelect)}},model:{value:t.rangeSelect,callback:function(e){t.rangeSelect=e},expression:"rangeSelect"}},t._l(t.rangeType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),s("div",{staticClass:"selector"},[s("span",{staticClass:"selector-span"},[t._v("任务状态")]),t._v(" "),s("Select",{staticStyle:{width:"100px","margin-right":"5px"},on:{"on-change":function(e){return t.getAcceptTask(t.typeSelect,t.rangeSelect,t.stateSelect)}},model:{value:t.stateSelect,callback:function(e){t.stateSelect=e},expression:"stateSelect"}},t._l(t.stateType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)]),t._v(" "),t._m(0)]),t._v(" "),s("Divider"),t._v(" "),s("div",{staticClass:"task-content"},t._l(t.taskItems,function(e){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow(t.stateSelect,e.trs),expression:"isShow(stateSelect, item.trs)"}],staticClass:"task-item",class:{completed:t.isComplete(e.trs),"completed-mouseenter":t.isEnter(e.task_id)&&t.isComplete(e.trs),waiting:t.isWaiting(e.trs),"waiting-mouseenter":t.isEnter(e.task_id)&&t.isWaiting(e.trs),"item-mouseenter":t.isEnter(e.task_id)},on:{mouseenter:function(a){t.enterItemId=e.task_id},mouseleave:function(e){t.enterItemId=""},click:function(a){return t.jumpToTaskDetail(e.task_id)}}},[s("div",{staticClass:"task-title"},[s("span",[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"task-type"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("任务类型:")]),t._v(" "),s("span",[t._v(t._s(e.type)+" ")])]),t._v(" "),s("div",{staticClass:"task-endtime"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("截止时间:")]),t._v(" "),s("span",[t._v(t._s(e.endtime)+" ")])]),t._v(" "),s("div",{staticClass:"task-money"},[s("img",{staticClass:"coin",attrs:{src:a("bNU1")}}),t._v(" "),s("span",{staticClass:"span-money"},[t._v(t._s(e.money))])]),t._v(" "),s("Avatar",{staticClass:"avatar",attrs:{src:e.user.avatar}})],1)}),0)],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"state-type-hint",staticStyle:{display:"flex"}},[a("div",{staticClass:"div-box"},[a("div",{staticClass:"box green-state-box"}),t._v(" "),a("span",[t._v("已完成")])]),t._v(" "),a("div",{staticClass:"div-box"},[a("div",{staticClass:"box yellow-state-box"}),t._v(" "),a("span",[t._v("待审核")])]),t._v(" "),a("div",{staticClass:"div-box"},[a("div",{staticClass:"box blue-state-box"}),t._v(" "),a("span",[t._v("正在做")])])])}]};var h=a("VU/8")(m,v,!1,function(t){a("A8Ev")},"data-v-81934336",null).exports,f=a("mP1F"),_={props:["userInfo"],data:function(){return{passwdItems:{oldPasswd:"",newPasswd:"",confirmPasswd:""},isModifyPassword:!1,avatarUrl:"",schools:["中山大学"],grades:[{value:1,label:"大一"},{value:2,label:"大二"},{value:3,label:"大三"},{value:4,label:"大四"}]}},computed:{},methods:{dataURLtoBlob:function(t){for(var e=t.split(","),a=e[0].match(/:(.*?);/)[1],s=atob(e[1]),n=s.length,i=new Uint8Array(n);n--;)i[n]=s.charCodeAt(n);return new Blob([i],{type:a})},fileToDataURL:function(t,e){var a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsDataURL(t)},avatarImgUpload:function(t){var e=this,a=t.target.files[0];a?this.fileToDataURL(a,function(t){e.avatarUrl=t;var a=e.dataURLtoBlob(e.avatarUrl),s=new FormData;s.append("avatar",a),e.$axios({method:"post",url:"/api/v1/user/updateAvatar",data:s,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(t){200==t.data.code?(e.userInfo.avatar=e.avatarUrl=t.data.data,e.$Message.success(t.data.msg)):(e.avatarUrl=e.userInfo.avatar,e.$Message.error(t.data.msg))}).catch(function(t){e.avatarUrl=e.userInfo.avatar,e.$Message.error(t.response.data.msg)})}):this.avatarUrl=this.userInfo.avatar},filterMethod:function(t,e){return-1!==e.toUpperCase().indexOf(t.toUpperCase())},clearPasswdItem:function(){for(var t in this.passwdItems)this.passwdItems[t]="";this.isModifyPassword=!1},changeModifyPasswdShow:function(){this.isModifyPassword?this.clearPasswdItem():this.isModifyPassword=!0},updateInfo:function(){var t=this;if(!this.isModifyPassword||this.passwdItems.oldPasswd&&this.passwdItems.newPasswd)if(this.isModifyPassword&&this.passwdItems.confirmPasswd!=this.passwdItems.newPasswd)this.$Message.error("两次密码不一致！");else{var e={grade:this.userInfo.grade,phone:this.userInfo.phone,wechat:this.userInfo.wechat,qq:this.userInfo.qq};this.isModifyPassword&&this.passwdItems.confirmPasswd==this.passwdItems.newPasswd&&(e.oldPasswd=f(this.passwdItems.oldPasswd).toString(),e.newPasswd=f(this.passwdItems.newPasswd).toString()),this.$axios({method:"put",url:"/api/v1/user/update",data:e}).then(function(e){200==e.data.code&&(t.$Message.success(e.data.msg[0]),e.data.msg.length>1&&(-1!=e.data.msg[1].indexOf("成功")?t.$Message.success(e.data.msg[1]):t.$Message.error(e.data.msg[1]))),t.clearPasswdItem()}).catch(function(e){t.clearPasswdItem(),401==e.response.status&&t.$router.push({name:"login"}),t.$Message.error(e.response.data.msg)})}else this.$Message.error("原密码或新密码不能为空！")}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("h1",{staticClass:"div-border-bottom"},[t._v("Profile")]),t._v(" "),a("div",{staticClass:"div-userinfo"},[a("h2",[t._v("Username")]),t._v(" "),a("Input",{attrs:{disabled:""},model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}}),t._v(" "),a("h2",[t._v("Password")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.changeModifyPasswdShow}},[t._v("Modify")]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.isModifyPassword?a("div",{staticClass:"div-password"},[a("h3",[t._v("Old Password")]),t._v(" "),a("Input",{attrs:{placeholder:"Enter old password",type:"password",clearable:""},model:{value:t.passwdItems.oldPasswd,callback:function(e){t.$set(t.passwdItems,"oldPasswd",e)},expression:"passwdItems.oldPasswd"}}),t._v(" "),a("h3",[t._v("New Password")]),t._v(" "),a("Input",{attrs:{placeholder:"Enter new password",type:"password",clearable:""},model:{value:t.passwdItems.newPasswd,callback:function(e){t.$set(t.passwdItems,"newPasswd",e)},expression:"passwdItems.newPasswd"}}),t._v(" "),a("h3",[t._v("Confirm Password")]),t._v(" "),a("Input",{attrs:{placeholder:"confirm password",type:"password",clearable:""},model:{value:t.passwdItems.confirmPasswd,callback:function(e){t.$set(t.passwdItems,"confirmPasswd",e)},expression:"passwdItems.confirmPasswd"}}),t._v(" "),a("Alert",{directives:[{name:"show",rawName:"v-show",value:t.passwdItems.newPasswd!=t.passwdItems.confirmPasswd,expression:"passwdItems.newPasswd != passwdItems.confirmPasswd"}],staticClass:"alert-message",attrs:{type:"error","show-icon":""}},[t._v("\n          两次密码不一致\n        ")])],1):t._e()]),t._v(" "),a("div",{staticClass:"div-basicInf"},[a("h1",[t._v("Basic Information")]),t._v(" "),a("h2",[t._v("Name")]),t._v(" "),a("Input",{attrs:{placeholder:"Enter realname..",disabled:""},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}}),t._v(" "),a("div",{staticStyle:{width:"49%",float:"left"}},[a("h3",[t._v("School")]),t._v(" "),a("AutoComplete",{attrs:{data:t.schools,"filter-method":t.filterMethod,placeholder:"input here",disabled:""},model:{value:t.userInfo.school,callback:function(e){t.$set(t.userInfo,"school",e)},expression:"userInfo.school"}})],1),t._v(" "),a("div",{staticStyle:{width:"49%",float:"right"}},[a("h3",[t._v("Grade")]),t._v(" "),a("Select",{model:{value:t.userInfo.grade,callback:function(e){t.$set(t.userInfo,"grade",e)},expression:"userInfo.grade"}},t._l(t.grades,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)],1),t._v(" "),a("div",{staticClass:"div-otherInf"},[a("h1",[t._v("Contact Information")]),t._v(" "),a("h2",[t._v("Phone Number")]),t._v(" "),a("Input",{attrs:{placeholder:"Enter phonenumber..",clearable:""},model:{value:t.userInfo.phone,callback:function(e){t.$set(t.userInfo,"phone",e)},expression:"userInfo.phone"}}),t._v(" "),a("h2",[t._v("WeChat")]),t._v(" "),a("Input",{attrs:{placeholder:"Enter webchat..",clearable:""},model:{value:t.userInfo.wechat,callback:function(e){t.$set(t.userInfo,"wechat",e)},expression:"userInfo.wechat"}}),t._v(" "),a("h2",[t._v("QQ")]),t._v(" "),a("Input",{attrs:{placeholder:"Enter QQ..",clearable:""},model:{value:t.userInfo.qq,callback:function(e){t.$set(t.userInfo,"qq",e)},expression:"userInfo.qq"}})],1),t._v(" "),a("Button",{staticStyle:{margin:"5px 0px 5px 0px"},attrs:{type:"success",long:""},on:{click:t.updateInfo}},[t._v("Submit")])],1),t._v(" "),a("div",{staticClass:"div-avatar"},[a("p",{staticStyle:{"font-size":"22px"}},[t._v("Avatar")]),t._v(" "),a("div",{staticStyle:{position:"relative"}},[a("img",{attrs:{src:t.avatarUrl}}),t._v(" "),a("label",{staticClass:"div-edit-avatar",attrs:{for:"fileInput"},on:{change:t.avatarImgUpload}},[a("Icon",{attrs:{type:"md-create"}}),t._v("\n        Edit\n      ")],1),t._v(" "),a("input",{attrs:{id:"fileInput",type:"file"},on:{change:t.avatarImgUpload}})]),t._v(" "),a("Rate",{attrs:{"allow-half":"","show-text":"",disabled:""},model:{value:t.userInfo.score,callback:function(e){t.$set(t.userInfo,"score",e)},expression:"userInfo.score"}},[a("span",{staticStyle:{color:"#f5a623",position:"relative",bottom:"2px"}},[t._v(t._s(t.userInfo.score))])])],1)])},staticRenderFns:[]};var b=a("VU/8")(_,g,!1,function(t){a("BjOK")},"data-v-781631ce",null).exports,y={data:function(){return{userInfo:{}}},mounted:function(){var t=this;this.$axios.get("api/v1/user/getPersonalInfo").then(function(e){200==e.data.code&&(t.userInfo=e.data.data)}).catch(function(e){console.log(e),401==e.response.status&&(t.$router.push({name:"login"}),t.$Message.error("请登录"))})},methods:{jumpToMainPage:function(){this.$router.push({path:"/MainPage"})},jumpToLoginPage:function(){var t=this;this.$axios.get("api/v1/user/logout").then(function(e){200==e.data.code?(t.$router.push({name:"login"}),t.$Message.success("退出成功！")):(t.$router.push({name:"login"}),t.$Message.error(e.data.msg))}).catch(function(e){t.$router.push({name:"login"}),t.$Message.error(e.response.statusText)})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personal-page-body"},[a("Layout",[a("div",{staticClass:"div-header"},[a("Header",{staticClass:"layout-header"},[a("div",{staticClass:"layout-header-right"},[a("div",{staticClass:"avatar"},[a("img",{staticClass:"avatarImg",attrs:{src:t.userInfo.avatar}})]),t._v(" "),a("Dropdown",[a("span",{staticStyle:{color:"#eee"}},[t._v(t._s(t.userInfo.username))]),t._v(" "),a("Icon",{staticStyle:{margin:"7px",color:"#2d8cf0"},attrs:{type:"ios-arrow-down",size:"24"}}),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[a("div",{on:{click:function(e){return t.jumpToMainPage()}}},[a("Icon",{attrs:{type:"ios-cube"}}),t._v("\n                                主站\n                              ")],1)]),t._v(" "),a("DropdownItem",[a("div",{on:{click:function(e){return t.jumpToLoginPage()}}},[a("Icon",{attrs:{type:"ios-power"}}),t._v("\n                                退出\n                              ")],1)])],1)],1)],1)])],1),t._v(" "),a("Layout",{staticClass:"layout-bottom"},[a("Sider",{staticClass:"layout-sider"},[a("Menu",{attrs:{"active-name":"1-1",theme:"dark",width:"auto"}},[a("router-link",{attrs:{to:"/personalPage/personalInfo"}},[a("MenuItem",{attrs:{name:"1-1"}},[t._v("个人信息")])],1),t._v(" "),a("router-link",{attrs:{to:"/personalPage/deposit"}},[a("MenuItem",{attrs:{name:"1-2"}},[t._v("充值")])],1),t._v(" "),a("router-link",{attrs:{to:"/personalPage/withdraw"}},[a("MenuItem",{attrs:{name:"1-3"}},[t._v("提现")])],1)],1)],1),t._v(" "),a("div",{staticClass:"content"},[a("router-view",{attrs:{userInfo:t.userInfo}})],1)],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(y,k,!1,function(t){a("HvuP")},"data-v-0f419179",null).exports,I={data:function(){return{userInfo:{},message:[{id:1,message:"你已被踢出小组 public_team"},{id:1,message:"你已被踢出小组 public_team"},{id:1,message:"你已被踢出小组 public_team"},{id:1,message:"你已被踢出小组 public_team"},{id:2,message:"你发布的任务 buy food 已被 hyx 接受"},{id:2,message:"你发布的任务 可能会发生这样的情况：当一个道具在激活状态时，另一个道具与挡板发生了接触。在这种情况下我们有超过1个在当前PowerUps容器中处于激活状态的道具。然后，当这些道具中的一个被停用时，我们不应使其效果失效因为另一个相同类型的道具仍处于激活状态。出于这个原因，我们使用isOtherPowerUpActive检查是否有同类道具处于激活状态。只有当它返回false时，我们才停用这个道具的效果。这样，给定类型的道具的持续时间就可以延长至最近一次被激活后的持续时间。 已被 hyx 接受"}],isUser:!0,showMsg:!1,inBackTop:!1,isRouterAlive:!0,taskList:[{value:"All",label:"全部"},{value:"Questionaire",label:"问卷调查"},{value:"Express",label:"取快递"}],rangeList:[{value:"All",label:"全部"},{value:"Group1",label:"小组1"}],taskClass:"",range:""}},mounted:function(){var t=this;this.$axios.get("api/v1/user/getPersonalInfo").then(function(e){200==e.data.code&&(t.userInfo=e.data.data,t.isUser=0==t.userInfo.type)}).catch(function(e){401==e.response.status&&(t.$router.push({name:"login"}),t.$Message.error("请登录"))}),this.$Notice.config({top:100,duration:3}),this.$axios.get("/api/v1/toast").then(function(e){console.log(e),200==e.data.code&&(t.message=e.data.data,console.log(t.message))}),this.$router.push({path:"/MainPage/taskSearch"})},methods:{jumpToPersonalPage:function(){this.isUser?this.$router.push({path:"/personalPage/personalInfo"}):this.$router.push({path:"/personalPage/organizationInf"})},jumpToLoginPage:function(){var t=this;this.$axios.get("api/v1/user/logout").then(function(e){200==e.data.code?(t.$router.push({name:"login"}),t.$Message.success("退出成功！")):(t.$router.push({name:"login"}),t.$Message.error(e.data.msg))}).catch(function(e){t.$router.push({name:"login"}),t.$Message.error(e.response.statusText)})},deleteMsg:function(t){var e=this;this.$axios.delete("/api/v1/toast/Id?id="+this.message[t].id).then(function(a){200==a.data.code?(e.$Message.success(a.data.msg),e.message.splice(t,1),0==e.message.length&&(e.showMsg=!1)):e.$Message.error(a.data.msg)}).catch(function(t){e.$Message.error(t.response.data.msg)})},reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}},provide:function(){return{reload:this.reload}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("Header",{staticClass:"layout-header"},[a("div",{staticClass:"layout-header-right"},[a("Badge",{staticStyle:{height:"32px","line-height":"32px","margin-right":"20px"},attrs:{count:t.message.length}},[a("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"ios-notifications-outline",size:"26"},on:{click:function(e){t.showMsg=!t.showMsg}}})],1),t._v(" "),a("div",{staticClass:"avatar"},[a("img",{staticClass:"avatarImg",attrs:{src:t.userInfo.avatar}})]),t._v(" "),a("Dropdown",[a("span",[t._v(t._s(t.userInfo.username))]),t._v(" "),a("Icon",{staticStyle:{margin:"7px",color:"#2d8cf0"},attrs:{type:"ios-arrow-down",size:"24"}}),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[a("div",{on:{click:function(e){return t.jumpToPersonalPage()}}},[a("Icon",{attrs:{type:"md-person"}}),t._v(" "+t._s(t.isUser?"个人信息":"机构信息")+"\n              ")],1)]),t._v(" "),a("DropdownItem",[a("div",{on:{click:function(e){return t.jumpToLoginPage()}}},[a("Icon",{attrs:{type:"ios-power"}}),t._v(" 退出")],1)])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMsg,expression:"showMsg"}],staticClass:"div-message"},[a("ul",t._l(t.message,function(e,s){return a("li",{staticClass:"li-msg"},[a("span",{staticStyle:{display:"inline-block",width:"300px"}},[t._v(t._s(e.message))]),t._v(" "),a("Icon",{staticStyle:{"vertical-align":"top",cursor:"pointer"},attrs:{type:"ios-close",size:"24"},on:{click:function(e){return t.deleteMsg(s)}}})],1)}),0)])]),t._v(" "),a("Layout",{staticClass:"layout-bottom"},[a("Sider",{staticClass:"layout-sider",style:{background:"#fff"}},[a("Menu",{attrs:{"active-name":"1-1",theme:"light",width:"auto","open-names":["1"]}},[a("Submenu",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"md-apps",size:"24"}}),t._v(" "),a("span",[t._v("任务管理")])],1),t._v(" "),a("router-link",{attrs:{to:"/MainPage/taskSearch"}},[a("MenuItem",{directives:[{name:"show",rawName:"v-show",value:t.isUser,expression:"isUser"}],attrs:{name:"1-1"}},[a("Icon",{attrs:{type:"ios-search"}}),t._v(" "),a("span",[t._v("任务搜索")])],1)],1),t._v(" "),a("router-link",{attrs:{to:"/MainPage/taskRelease"}},[a("MenuItem",{attrs:{name:"1-2"}},[a("Icon",{attrs:{type:"ios-paper-outline"}}),t._v(" "),a("span",[t._v("任务发布")])],1)],1),t._v(" "),a("Submenu",{attrs:{name:"1-3"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-paper"}}),t._v(" "),a("span",[t._v("我的任务")])],1),t._v(" "),a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.isUser,expression:"isUser"}],attrs:{to:"/MainPage/myAcceptTask"}},[a("MenuItem",{attrs:{name:"1-3-1"}},[t._v("接受任务")])],1),t._v(" "),a("router-link",{attrs:{to:"/MainPage/myReleaseTask"}},[a("MenuItem",{attrs:{name:"1-3-2"}},[t._v("发布任务")])],1)],2)],2),t._v(" "),a("Submenu",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"md-people",size:"24"}}),t._v(" "),a("span",[t._v("小组管理")])],1),t._v(" "),a("router-link",{attrs:{to:"/MainPage/groupSearch"}},[a("MenuItem",{attrs:{name:"2-1"}},[a("Icon",{attrs:{type:"ios-search"}}),t._v(" "),a("span",[t._v("小组搜索")])],1)],1),t._v(" "),a("router-link",{attrs:{to:"/MainPage/myGroup"}},[a("MenuItem",{attrs:{name:"2-2"}},[a("Icon",{attrs:{type:"ios-people-outline"}}),t._v(" "),a("span",[t._v("我的小组")])],1)],1),t._v(" "),a("router-link",{attrs:{to:"/MainPage/createGroup"}},[a("MenuItem",{attrs:{name:"2-3"}},[a("Icon",{attrs:{type:"ios-create-outline"}}),t._v(" "),a("span",[t._v("创建小组")])],1)],1)],2)],1)],1),t._v(" "),a("div",{staticClass:"layout-content"},[a("div",[t.isRouterAlive?a("router-view"):t._e()],1),t._v(" "),a("BackTop",[a("div",{class:["back-top-btn",{"back-top-btn-show":t.inBackTop}],on:{mouseenter:function(e){t.inBackTop=!0},mouseleave:function(e){t.inBackTop=!1}}},[a("Icon",{attrs:{type:"ios-arrow-up",size:"24"}})],1)])],1)],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(I,C,!1,function(t){a("cI5A")},"data-v-93698a20",null).exports,T={data:function(){return{username:"yao",taskType:[{value:"all",label:"全部"},{value:1,label:"问卷调查"},{value:2,label:"跑腿"}],rangeType:[{value:"all",label:"全部"}],typeSelect:"all",rangeSelect:"all",enterItemId:"",taskItems:[{task_id:1,title:"xxx问卷调查",introduction:"关于xxxxxxx的问卷调查",money:1,state:"doing",type:"问卷调查",max_accepter_number:2,user:{username:"yao",avatar:"http://139.196.79.193:3000/awesomeface.png"}},{task_id:2,title:"xxx取快递",intro:"在xxxxxxxxx范围内取快递",money:2,type:"取快递",state:"completed",max_accepter_number:1,user:{username:"yao",avatar:"http://139.196.79.193:3000/awesomeface.png"}},{task_id:3,title:"xxx取快递",intro:"在xxxxxxxxx范围内取快递",money:2,type:"取快递",state:"waiting",max_accepter_number:1,user:{username:"yao",avatar:"http://139.196.79.193:3000/awesomeface.png"}}]}},mounted:function(){this.getGroup(),this.getTasks(this.typeSelect,this.rangeSelect)},methods:{login:function(){this.$axios.post("/api/v1/user/login",{type:0,username:"hyx",password:"123456"}).then(function(t){console.log(t.headers)}).catch(function(t){console.log("Fail to request")})},getGroup:function(){var t=this;this.$axios.get("/api/v1/team/MemberName",{params:{member_username:t.username}}).then(function(e){var a=e.data;if(200==a.code)for(var s=a.data,n=0;n<s.length;n++)t.rangeType.push({value:s[n].team_id,label:s[n].team_name+"--"+s[n].leader})}).catch(function(t){console.log("Fail to request")})},getTasks:function(t,e){var a=this;this.$axios.get("/api/v1/task",{params:{type:t,range:e,username:a.username}}).then(function(t){var e=t.data;if(200==e.code){var s=e.data;a.taskItems=[];for(var n=0;n<s.length;n++)s[n].trs.length>=s[n].max_accepter_number||(1==s[n].type?s[n].type="问卷调查":2==s[n].type&&(s[n].type="跑腿"),a.taskItems.push(s[n]))}}).catch(function(t){})},jumpToTaskDetail:function(t){this.$router.push({path:"/MainPage/taskDetail/"+t})}}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-body"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-selector-block"},[s("div",{staticClass:"div-selectors",staticStyle:{}},[s("div",{staticClass:"selector"},[s("span",{staticClass:"selector-span"},[t._v("任务类型")]),t._v(" "),s("Select",{staticStyle:{width:"100px","margin-right":"5px"},on:{"on-change":function(e){return t.getTasks(t.typeSelect,t.rangeSelect)}},model:{value:t.typeSelect,callback:function(e){t.typeSelect=e},expression:"typeSelect"}},t._l(t.taskType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),s("div",{staticClass:"selector"},[s("span",{staticClass:"selector-span"},[t._v("任务发布范围")]),t._v(" "),s("Select",{staticStyle:{width:"100px","margin-right":"5px"},on:{"on-change":function(e){return t.getTasks(t.typeSelect,t.rangeSelect)}},model:{value:t.rangeSelect,callback:function(e){t.rangeSelect=e},expression:"rangeSelect"}},t._l(t.rangeType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)])]),t._v(" "),s("Divider"),t._v(" "),s("div",{staticClass:"task-content"},t._l(t.taskItems,function(e){return s("div",[s("div",{class:{"task-card":!0,"task-card-mouseenter":t.enterItemId==e.id,"task-card-mouseleave":!(t.enterItemId==e.id)},on:{mouseenter:function(a){t.enterItemId=e.id},mouseleave:function(e){t.enterItemId=""},click:function(a){return t.jumpToTaskDetail(e.task_id)}}},[s("div",{staticClass:"task-title"},[s("span",[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"task-intro"},[s("span",[t._v(t._s(e.introduction)+" ")])]),t._v(" "),s("div",{staticClass:"task-type"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("任务类型:")]),t._v(" "),s("span",[t._v(t._s(e.type)+" ")])]),t._v(" "),s("div",{staticClass:"task-money"},[s("img",{staticClass:"coin",attrs:{src:a("bNU1")}}),t._v(" "),s("span",{staticClass:"span-money"},[t._v(t._s(e.money))])]),t._v(" "),s("Avatar",{staticClass:"avatar",attrs:{src:e.user.avatar}})],1)])}),0)],1)])},staticRenderFns:[]};var S=a("VU/8")(T,$,!1,function(t){a("KzvB")},"data-v-3bfa8cf8",null).exports,M={data:function(){return{username:"yao",isFirst:!0,isUploading:!1,isQuestionaire:!0,taskType:[{value:1,label:"问卷调查"},{value:2,label:"跑腿"}],rangeType:[{value:1,label:"全部"}],enterItemId:"",disabledTime:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},taskInfo:{title:"",introduction:"",max_accepter_number:1,money:1,endtime:"",starttime:"",type:1,range:1,score:0,content:"",file:null},taskItems:[{id:1,title:"xxx问卷调查",endtime:"2019-05-01 23:00",money:1,state:"doing",type:"问卷调查",max_accepter_number:2},{id:2,title:"xxx取快递",endtime:"2019-05-01 23:00",money:2,type:"取快递",state:"completed",max_accepter_number:1},{id:3,title:"xxx取快递",endtime:"2019-05-01 23:00",money:2,type:"取快递",state:"waiting",max_accepter_number:1}]}},mounted:function(){Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},this.getRecentTask(),this.getGroup()},methods:{getRecentTask:function(){var t=this;this.$axios.get("/api/v1/task/findByPublisher",{params:{type:"all",range:"all",state:"all",publisher:t.username}}).then(function(e){t.taskItems=[];var a=e.data;if(200==a.code)for(var s=a.data,n=s.length>5?5:s.length,i=0;i<n;i++)1==s[i].type?s[i].type="问卷调查":2==s[i].type&&(s[i].type="跑腿"),t.taskItems.push(s[i])}).catch(function(t){})},getGroup:function(){var t=this;this.$axios.get("/api/v1/team/MemberName",{params:{member_username:t.username}}).then(function(e){var a=e.data;if(200==a.code)for(var s=a.data,n=0;n<s.length;n++)t.rangeType.push({value:s[n].team_id,label:s[n].team_name+"--"+s[n].leader})}).catch(function(t){console.log("Fail to request")})},getFile:function(t){this.file=t.target.files[0],console.log(this.file.name)},isEnter:function(t){return t==this.enterItemId},taskTypeChange:function(){this.isQuestionaire=1==this.taskInfo.type,this.isQuestionaire||(this.taskInfo.max_accepter_number=1)},handleBeforeUpload:function(t){var e=t.name.substring(t.name.lastIndexOf(".")+1);return console.log(t),"yaml"==e?this.taskInfo.file=t:this.$Notice.warning({title:"The file format is incorrect",desc:"File format is incorrect, please select yaml."}),!1},handleFormatError:function(t){this.$Notice.warning({title:"The file format is incorrect",desc:"File format is incorrect, please select yaml."})},jumpToTaskDetail:function(t){this.$router.push({path:"/MainPage/taskDetail/"+t})},releaseTask:function(t){var e=!1;this.isFirst=!1;var a=new Date(t.endtime),s=new Date;""==t.title&&(this.$Notice.warning({title:"Task Info Lack",desc:"Task Title"}),e=!0),""==t.simpleInfo&&(this.$Notice.warning({title:"Task Info Lack",desc:"Task SimpleInfo"}),e=!0),""==t.endtime&&(this.$Notice.warning({title:"Task Info Lack",desc:"Task Date and Time"}),e=!0),a<s&&(this.$Notice.warning({title:"Task Info TimeError",desc:"Please choose the latter time"}),e=!0),""==t.requirement&&(this.$Notice.warning({title:"Task Info Lack",desc:"Task Requirement"}),e=!0),null==t.file&&1==t.type&&(this.$Notice.warning({title:"Task Info Lack",desc:"Please Upload Task Questionnaire"}),e=!0),e||(this.isUploading=!0,1==t.type?this.postQuestionnaire(t):this.postTaskInfo(t,""))},postQuestionnaire:function(t){var e=this,a=this,s=new FormData;s.append("file",this.taskInfo.file),this.$axios.post("/api/v1/file/Questionnaire",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var s=e.data;if(200==s.code){var n=s.data.fileUrl;console.log(n),a.postTaskInfo(t,n)}}).catch(function(t){e.$Notice.warning({title:"Task Uploading Error",desc:"Fail to Upload the Questionnaire "})})},postTaskInfo:function(t,e){var a=new Date(t.endtime).Format("yyyy-MM-dd hh:mm:ss"),s=(new Date).Format("yyyy-MM-dd hh:mm:ss");t.endtime=a,t.starttime=s;var n=this;this.$axios.post("/api/v1/task",{title:t.title,introduction:t.introduction,money:t.money,score:t.score,max_accepter_number:t.max_accepter_number,publisher:n.username,type:t.type,starttime:t.starttime,endtime:t.endtime,content:t.content,range:t.range,questionnaire_path:e}).then(function(t){console.log(t.data);var e=t.data;200==e.code&&(n.$Notice.success({title:"Task Release",desc:"Releasing the task successfully."}),n.jumpToTaskDetail(e.data.task_id))}).catch(function(t){this.$Notice.warning({title:"Task Release Error",desc:"Fail to Release the Task "})})}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-body"},[s("h1",[t._v("任务发布")]),t._v(" "),s("div",{staticClass:"content-body-layout"},[s("div",{staticClass:"task-info"},[s("div",[s("div",{staticClass:"div-formItem div-flex"},[s("span",{staticClass:"item-span",staticStyle:{width:"5%"}},[t._v("标题")]),t._v(" "),s("Input",{staticClass:"input-style",class:{"error-input":""==t.taskInfo.title&&!t.isFirst},staticStyle:{width:"95%"},attrs:{type:"textarea",rows:1,placeholder:"Enter task title",clearable:""},model:{value:t.taskInfo.title,callback:function(e){t.$set(t.taskInfo,"title",e)},expression:"taskInfo.title"}})],1),t._v(" "),s("div",{staticClass:"div-formItem div-flex"},[s("span",{staticClass:"item-span",staticStyle:{width:"5%"}},[t._v("简介")]),t._v(" "),s("Input",{staticClass:"input-style",class:{"error-input":""==t.taskInfo.introduction&&!t.isFirst},staticStyle:{width:"95%"},attrs:{placeholder:"Enter task title",type:"textarea",rows:4},model:{value:t.taskInfo.introduction,callback:function(e){t.$set(t.taskInfo,"introduction",e)},expression:"taskInfo.introduction"}})],1),t._v(" "),s("div",{staticClass:"div-formItem div-flex"},[s("span",{staticClass:"item-span",staticStyle:{width:"5%"}},[t._v("数量")]),t._v(" "),s("InputNumber",{staticClass:"input-style",staticStyle:{width:"20%"},attrs:{min:1,disabled:2==t.taskInfo.type},model:{value:t.taskInfo.max_accepter_number,callback:function(e){t.$set(t.taskInfo,"max_accepter_number",e)},expression:"taskInfo.max_accepter_number"}})],1),t._v(" "),s("div",{staticClass:"div-formItem div-flex"},[s("span",{staticClass:"item-span",staticStyle:{width:"5%"}},[t._v("金额")]),t._v(" "),s("InputNumber",{staticClass:"input-style",staticStyle:{width:"20%"},attrs:{min:1},model:{value:t.taskInfo.money,callback:function(e){t.$set(t.taskInfo,"money",e)},expression:"taskInfo.money"}})],1),t._v(" "),s("div",{staticClass:"div-formItem",staticStyle:{display:"flex"}},[s("span",{staticClass:"item-span"},[t._v("截止时间")]),t._v(" "),s("div",{staticStyle:{display:"flex"}},[s("DatePicker",{staticClass:"input-style",class:{"error-input":""==t.taskInfo.endtime&&!t.isFirst},staticStyle:{width:"250px"},attrs:{type:"datetime",options:t.disabledTime,placeholder:"Select date"},model:{value:t.taskInfo.endtime,callback:function(e){t.$set(t.taskInfo,"endtime",e)},expression:"taskInfo.endtime"}})],1)]),t._v(" "),s("div",{staticClass:"div-task-type-range"},[s("div",{staticClass:"div-task-type"},[s("span",{staticClass:"item-span"},[t._v("任务类型")]),t._v(" "),s("Select",{staticClass:"input-style",staticStyle:{width:"70%"},attrs:{label:"问卷调查","on-change":t.taskTypeChange()},model:{value:t.taskInfo.type,callback:function(e){t.$set(t.taskInfo,"type",e)},expression:"taskInfo.type"}},t._l(t.taskType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),s("div",{staticClass:"div-task-type"},[s("span",{staticClass:"item-span",staticStyle:{width:"25%"}},[t._v("任务发布范围")]),t._v(" "),s("Select",{staticClass:"input-style",staticStyle:{width:"70%"},attrs:{label:"全部",multiple:""},model:{value:t.taskInfo.range,callback:function(e){t.$set(t.taskInfo,"range",e)},expression:"taskInfo.range"}},t._l(t.rangeType,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)]),t._v(" "),s("div",{staticClass:"div-formItem"},[s("span",{staticClass:"item-span"},[t._v("评价分数要求")]),t._v(" "),s("InputNumber",{staticClass:"input-style",attrs:{max:5,min:0,step:.5},model:{value:t.taskInfo.score,callback:function(e){t.$set(t.taskInfo,"score",e)},expression:"taskInfo.score"}})],1),t._v(" "),s("Divider"),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isQuestionaire,expression:"isQuestionaire"}],staticClass:"div-questionaire"},[s("span",{staticClass:"item-span"},[t._v("上传调查问卷文件")]),t._v(" "),s("Upload",{staticStyle:{"margin-top":"20px"},attrs:{multiple:"",type:"drag",action:"//jsonplaceholder.typicode.com/posts/",format:["jpg","jpeg","png"],"before-upload":t.handleBeforeUpload}},[s("div",{staticStyle:{padding:"20px 0"}},[s("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),t._v(" "),s("p",[t._v("Click or drag files here to upload")])],1)])],1),t._v(" "),s("div",{staticClass:"div-formItem"},[s("span",{staticClass:"item-span",staticStyle:{display:"block"}},[t._v("具体要求与联系方式")]),t._v(" "),s("Input",{staticStyle:{width:"100%",position:"relative","margin-top":"15px"},attrs:{placeholder:"Enter task title",type:"textarea",rows:10},model:{value:t.taskInfo.content,callback:function(e){t.$set(t.taskInfo,"content",e)},expression:"taskInfo.content"}})],1)],1),t._v(" "),s("Button",{staticStyle:{"font-size":"14px"},attrs:{type:"primary",long:"",disabled:t.isUploading},on:{click:function(e){return t.releaseTask(t.taskInfo)}}},[t._v("发布任务")])],1),t._v(" "),s("div",{staticClass:"div-recent-task"},[s("p",{staticStyle:{margin:"10px","font-size":"18px","font-weight":"bold"}},[t._v("最近发布的任务")]),t._v(" "),s("div",{staticClass:"task-content"},t._l(t.taskItems,function(e){return s("div",{staticClass:"task-item",class:{"item-mouseenter":t.isEnter(e.task_id)},on:{mouseenter:function(a){t.enterItemId=e.task_id},mouseleave:function(e){t.enterItemId=""},click:function(a){return t.jumpToTaskDetail(e.task_id)}}},[s("div",{staticClass:"task-title"},[s("span",[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"task-type"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("任务类型:")]),t._v(" "),s("span",[t._v(t._s(e.type)+" ")])]),t._v(" "),s("div",{staticClass:"task-endtime"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("截止时间:")]),t._v(" "),s("span",[t._v(t._s(e.endtime)+" ")])]),t._v(" "),s("div",{staticClass:"task-money"},[s("img",{staticClass:"coin",attrs:{src:a("bNU1")}}),t._v(" "),s("span",{staticClass:"span-money"},[t._v(t._s(e.money))])]),t._v(" "),s("div",{staticClass:"task-number"},[s("Icon",{attrs:{type:"ios-copy",size:"18"}}),t._v(" "),s("span",[t._v(t._s(e.max_accepter_number))])],1)])}),0)]),t._v(" "),s("div",[s("p",[t._v(t._s(t.taskInfo.title))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.introduction))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.max_accepter_number))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.money))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.type))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.range))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.endtime))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.starttime))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.score))]),t._v(" "),s("p",[t._v(t._s(t.taskInfo.content))])])])])},staticRenderFns:[]};var L=a("VU/8")(M,F,!1,function(t){a("LOC2")},"data-v-74502d5a",null).exports,P={data:function(){return{groupAttributeList:[{value:"group_id",label:"小组ID"},{value:"group_name",label:"小组名字"},{value:"group_tag",label:"小组标签"}],groupAttribute:"group_id",errorMessage:"",input:"",enterid:0,first:!0,default_teams:[{team_id:1,team_name:"group1",leader:"hhyx",logo:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1556460005123&di=70167f3e40d02f2764db7079522fc646&imgtype=0&src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F16%2F09%2F11%2F2157d55a32f1e7f.jpg",createAt:"2019-04-28 00:00:00",description:"This is group1",limit:0,teamlabels:[{label:"羽毛球"},{label:"足球"}],members:[{member_username:"hhyx"},{member_username:"hzhh"},{member_username:"HeChX"},{member_username:"Howlyao"}]},{team_id:2,team_name:"group2",leader:"HeChX",logo:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2605489307,3834536344&fm=26&gp=0.jpg",createAt:"2019-04-28 00:00:00",description:"This is group2",limit:0,teamlabels:[{label:"乒乓球"}],members:[{member_username:"HeChX"},{member_username:"hzhh"},{member_username:"Howlyao"}]},{team_id:3,team_name:"group3",leader:"hzhh",logo:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1556460204895&di=7617f2b558b0aa0fa511b000830eee0f&imgtype=0&src=http%3A%2F%2Fpic.51yuansu.com%2Fpic3%2Fcover%2F02%2F75%2F16%2F5a33804002831_610.jpg",createAt:"2019-04-28 00:00:00",description:"This is group3",limit:0,teamlabels:[{label:"羽毛球"}],members:[{member_username:"hzhh"},{member_username:"HeChX"},{member_username:"Howlyao"},{member_username:"user1"},{member_username:"user2"}]}],teams:[],tags:["sport"],showDrawer:-1,getGroupURLParams:"",loginUser:"HeChX"}},methods:{getGroupItem:function(t){this.showDrawer!=t?this.showDrawer=t:this.showDrawer=-1},searchGroup:function(){var t=this;if(""!=this.input){console.log(this.groupAttribute),this.first&&(this.first=!1);var e="";switch(this.groupAttribute){case"group_id":this.getGroupURLParams="/Id?team_id="+this.input,e="小组ID";break;case"group_name":this.getGroupURLParams="/Name?team_name="+this.input,e="小组名字";break;case"group_tag":this.getGroupURLParams="/Label?label="+this.input,e="小组标签"}var a=this;a.teams=[],this.$axios.get("/api/v1/team"+this.getGroupURLParams).then(function(s){switch(console.log(s.data),s.data.code){case 200:for(var n=s.data.data,i=0,o=n.length;i<o;i++)a.teams.push(n[i]);break;case 213:t.errorMessage="抱歉，没有找到符合条件("+t.groupAttribute+" = "+t.input+")的小组，请确认"+e+"是否正确"}}).catch(function(a){console.log(a),a.response?(console.log(a.response.status),413==a.response.status&&(t.errorMessage="抱歉，没有找到符合条件("+t.groupAttribute+" = "+t.input+")的小组，请确认"+e+"是否正确",console.log(t.errorMessage))):a.request&&console.log(a.request)})}},applyJoinGroup:function(t){var e=this;console.log(t);for(var a=!1,s=0,n=this.teams.length;s<n;s++)if(t==this.teams[s].team_id){for(var i=0,o=this.teams[s].members.length;i<o;i++)if(this.loginUser==this.teams[s].members[i].member_username){a=!0;break}break}a?this.$Modal.info({title:"提示",content:"<p>你已经在该小组中了</p><p>不能再次加入</P>"}):this.$axios.post("/api/v1/team/Member/Addition",{team_id:t,username:this.loginUser}).then(function(a){switch(console.log(a.data),a.data.code){case 200:e.$Modal.success({title:"提示",content:"<p>申请成功</p><p>你已经成功加入该小组</p>",onOk:function(){e.$router.push({name:"groupDetail",params:{id:t}})}});break;case 210:e.$Modal.error({title:"提示",content:"<p>申请失败</p><p>用户不存在</p>"});break;case 211:e.$Modal.info({title:"提示",content:"<p>你已经在该小组中了</p><p>不能再次加入</P>"});break;case 213:e.$Modal.error({title:"提示",content:"<p>申请失败</p><p>小组不存在</p>"});break;case 214:e.$Modal.info({title:"提示",content:"<p>申请已发送</p><p>等待小组组长审核</p>"});break;case 215:e.$Modal.info({title:"提示",content:"<p>申请失败</p><p>该小组禁止所有人加入</p>"})}}).catch(function(t){console.log(t)})}},mounted:function(){}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-body"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-selector-block"},[a("div",{staticClass:"selector"},[a("Input",{attrs:{placeholder:"Search Group"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",label:"小组ID"},slot:"prepend",model:{value:t.groupAttribute,callback:function(e){t.groupAttribute=e},expression:"groupAttribute"}},t._l(t.groupAttributeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),t._v(" "),a("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.searchGroup},slot:"append"})],1)],1)]),t._v(" "),a("Divider",[t._v("Group")]),t._v(" "),0!=t.teams.length?a("div",{staticClass:"group-content"},t._l(t.teams,function(e){return a("div",{key:e.id,staticClass:"div-flex"},[a("div",{class:{"group-card":!0,"group-card-mouseenter":t.enterid==e.team_id,"group-card-mouseleave":!(t.enterid==e.team_id)},on:{mouseenter:function(a){t.enterid=e.team_id},mouseleave:function(e){t.enterid=0},click:function(a){return t.getGroupItem(e.team_id)}}},[a("div",{staticClass:"top-block"},[a("div",{staticClass:"group-image",staticStyle:{display:"inline"}},[a("Avatar",{attrs:{src:e.logo}},[t._v(" U")])],1),t._v(" "),a("div",{staticClass:"group-name",staticStyle:{display:"inline"}},[a("span",[t._v(t._s(e.team_name))])])]),t._v(" "),a("div",{staticClass:"middle-block"},[a("div",{staticClass:"group-description"},[a("span",[t._v(t._s(e.description))])])]),t._v(" "),a("div",{staticClass:"bottom-block"},[a("div",{staticClass:"group-tags",staticStyle:{display:"inline"}},[a("Icon",{attrs:{type:"md-pricetags"}}),t._v(" "),t._l(e.teamlabels,function(e){return a("Tag",{key:e.label,staticClass:"tags",attrs:{type:"border",name:e.label}},[t._v(t._s(e.label))])})],2),t._v(" "),a("div",{staticClass:"group-members",staticStyle:{display:"inline"}},[a("Icon",{attrs:{type:"md-person"}}),t._v(" "),a("span",[t._v(t._s(e.members.length))])],1)]),t._v(" "),a("div",{staticClass:"group-simpleinfo"},[a("span",[t._v(t._s(e.simpleinfo)+" ")])]),t._v(" "),a("Drawer",{attrs:{width:"50","mask-closable":!1,closable:!1,transfer:!1,inner:!0,scrollable:!1,value:t.showDrawer==e.team_id}},[a("div",{staticClass:"applyJoin-block"},[a("Button",{attrs:{type:"primary"},on:{click:function(a){return t.applyJoinGroup(e.team_id)}}},[t._v("申请进群")])],1)])],1)])}),0):a("div",{staticClass:"group-content"},[a("div",{staticClass:"search-result"},[t.first?a("span",[t._v("请输入想搜索的小组的条件")]):a("span",[t._v(t._s(t.errorMessage))])])])],1)])},staticRenderFns:[]};var R=a("VU/8")(P,D,!1,function(t){a("nW86")},"data-v-20380219",null).exports,U={data:function(){return{groupAttributeList:[{value:"group_id,",label:"小组ID"},{value:"group_name",label:"小组名字"},{value:"group_tag",label:"小组标签"}],groupAttribute:"",enterid:0,defaultTeams:[{team_id:1,team_name:"group1",leader:"hhyx",logo:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1556460005123&di=70167f3e40d02f2764db7079522fc646&imgtype=0&src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F16%2F09%2F11%2F2157d55a32f1e7f.jpg",createAt:"2019-04-28 00:00:00",description:"This is group1",limit:0,teamlabels:[{label:"羽毛球"},{label:"足球"}],members:[{member_username:"hhyx"},{member_username:"hzhh"},{member_username:"HeChX"},{member_username:"Howlyao"}]},{team_id:2,team_name:"group2",leader:"HeChX",logo:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2605489307,3834536344&fm=26&gp=0.jpg",createAt:"2019-04-28 00:00:00",description:"This is group2",limit:0,teamlabels:[{label:"乒乓球"}],members:[{member_username:"HeChX"},{member_username:"hzhh"},{member_username:"Howlyao"}]},{team_id:3,team_name:"group3",leader:"hzhh",logo:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1556460204895&di=7617f2b558b0aa0fa511b000830eee0f&imgtype=0&src=http%3A%2F%2Fpic.51yuansu.com%2Fpic3%2Fcover%2F02%2F75%2F16%2F5a33804002831_610.jpg",createAt:"2019-04-28 00:00:00",description:"This is group3",limit:0,teamlabels:[{label:"羽毛球"}],members:[{member_username:"hzhh"},{member_username:"HeChX"},{member_username:"Howlyao"},{member_username:"GZQ"},{member_username:"Huang-Junjie"}]}],teams:[],tags:["sport","music"],loginUser:"hyx"}},methods:{getAllGroupJoined:function(){var t=this;t.teams=[],t.$axios.get("/api/v1/team/MemberName?member_username="+t.loginUser).then(function(e){if(console.log(e.data),200==e.data.code)for(var a=e.data.data,s=0,n=a.length;s<n;s++)t.teams.push(a[s])}).catch(function(t){console.log(t)})},jumpToGroupDetail:function(t){this.$router.push({name:"groupDetail",params:{id:t.team_id,group:t}})}},mounted:function(){this.getAllGroupJoined()}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-body"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-selector-block"},[a("div",{staticStyle:{"margin-left":"15px"}},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:"/MainPage/myGroup"}},[t._v("我的小组")])],1)],1)]),t._v(" "),a("Divider"),t._v(" "),0!=t.teams.length?a("div",{staticClass:"group-content"},t._l(t.teams,function(e){return a("div",{key:e.team_id,staticClass:"div-flex"},[a("div",{class:{"group-card":!0,"group-card-mouseenter":t.enterid==e.team_id,"group-card-mouseleave":!(t.enterid==e.team_id)},on:{mouseenter:function(a){t.enterid=e.team_id},mouseleave:function(e){t.enterid=0},click:function(a){return t.jumpToGroupDetail(e)}}},[a("div",{staticClass:"top-block"},[a("div",{staticClass:"group-image",staticStyle:{display:"inline"}},[a("Avatar",{attrs:{src:e.logo}},[t._v(" U")])],1),t._v(" "),a("div",{staticClass:"group-name",staticStyle:{display:"inline"}},[a("span",[t._v(t._s(e.team_name))])])]),t._v(" "),a("div",{staticClass:"middle-block"},[a("div",{staticClass:"group-description"},[a("span",[t._v(t._s(e.description))])])]),t._v(" "),a("div",{staticClass:"bottom-block"},[a("div",{staticClass:"group-tags",staticStyle:{display:"inline"}},[a("Icon",{attrs:{type:"md-pricetags"}}),t._v(" "),t._l(e.teamlabels,function(e){return a("Tag",{key:e.id,staticClass:"tags",attrs:{type:"border",name:e.label}},[t._v(t._s(e.label))])})],2),t._v(" "),a("div",{staticClass:"group-members",staticStyle:{display:"inline"}},[a("Icon",{attrs:{type:"md-person"}}),t._v(" "),a("span",[t._v(t._s(e.members.length))])],1)])])])}),0):a("div",{staticClass:"group-content"},[a("div",{staticClass:"no-group"},[t._v("\n                你还没有加入小组，赶紧去加入吧！\n            ")])])],1)])},staticRenderFns:[]};var q=a("VU/8")(U,A,!1,function(t){a("Hrq5")},"data-v-fa69ed6a",null).exports,B=a("//Fk"),E=a.n(B),G=a("pFYg"),N=a.n(G),j={data:function(){return{screenWidth:document.body.clientWidth,currentInvitedMember:"",InvitedMemberList:[],logoUrl:"http://139.196.79.193:3000/awesomeface.png",group:{team_name:"",leader:"",logo:"",description:"",limit:"",teamlabels:[],members:[]},logoFile:"",defaultLabels:[{value:"体育",label:"体育",children:[{value:"足球",label:"足球"},{value:"网球",label:"网球"},{value:"乒乓球",label:"乒乓球"},{value:"篮球",label:"篮球"},{value:"排球",label:"排球"},{value:"游泳",label:"游泳"},{value:"太极",label:"太极"},{value:"龙舟",label:"龙舟"},{value:"棒球",label:"棒球"},{value:"跆拳道",label:"跆拳道"},{value:"健美操",label:"健美操"}]},{value:"学习",label:"学习",children:[{value:"专业",label:"专业",children:[{value:"计算机类",label:"计算机类"},{value:"软件工程",label:"软件工程"},{value:"其他专业",label:"其他专业"}]},{value:"课程",label:"课程",children:[{value:"高等数学",label:"高等数学"},{value:"线性代数",label:"线性代数"},{value:"其他课程",label:"其他课程"}]}]},{value:"兴趣",label:"兴趣",children:[{value:"舞蹈",label:"舞蹈"},{value:"音乐",label:"音乐"},{value:"钢琴",label:"钢琴"},{value:"吉他",label:"吉他"}]}],currentTeamLabel:[],teamlabels:[],ruleValidate:{team_name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],description:[{required:!0,message:"The description cannot be empty",trigger:"blur"}],limit:[{required:!0,message:"Please select the limit",trigger:"change"}],teamlabels:[{required:!1,type:"array",min:1,message:"Choose at least one tag",trigger:"change"}],invMem:[{required:!1}]}}},methods:{addInvitedMember:function(){if(""!==this.currentInvitedMember){for(var t=-1,e=0,a=this.InvitedMemberList.length;e<a;e++)if(this.currentInvitedMember==this.InvitedMemberList[e].member_username){t=e;break}-1==t&&this.InvitedMemberList.push({member_username:this.currentInvitedMember})}},handleCloseMembers:function(t,e){for(var a=-1,s=0,n=this.InvitedMemberList.length;s<n;s++)if(e==this.InvitedMemberList[s].member_username){a=s;break}-1!=a&&this.InvitedMemberList.splice(a,1)},addTeamLabels:function(){console.log(this.currentTeamLabel);var t;0!=(t=this.currentTeamLabel.length)&&-1==this.teamlabels.indexOf(this.currentTeamLabel[t-1])&&(this.teamlabels.push(this.currentTeamLabel[t-1]),this.currentTeamLabel=[])},handleCloseLabels:function(t,e){console.log(e);var a=this.teamlabels.indexOf(e);console.log(a),this.teamlabels.splice(a,1)},previewImage:function(t){var e=this;if(this.logoFile=t.target.files[0],"undefine"!=!("undefined"==typeof FileReader||N.a(FileReader))){var a=new FileReader;a.readAsDataURL(this.logoFile),a.onload=function(t){e.logoUrl=a.result}}},uploadLogoImage:function(){var t=this,e=new FormData;return e.append("file",this.logoFile),new E.a(function(a,s){t.$axios.post("/api/v1/file/TeamLogo",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t.data),a(t.data.data)}).catch(function(t){s(t)})})},uploadGroupInfo:function(t){var e=this;this.group.leader="HeChX",this.group.logo=t,this.group.members.push({member_username:this.group.leader}),console.log(this.InvitedMemberList);for(var a=0,s=this.InvitedMemberList.length;a<s;a++)this.group.members.push(this.InvitedMemberList[a]);for(var n=this.teamlabels.length,i=0;i<n;i++)this.group.teamlabels.push({label:this.teamlabels[i]});return console.log(this.group),new E.a(function(t,a){e.$axios.post("/api/v1/team",e.group).then(function(e){t(e.data)}).catch(function(t){a(t)})})},createGroup:function(t){var e=this;this.$refs[t].validate(function(t){t?(console.log("Begin to upload"),""!=e.logoFile?e.uploadLogoImage().then(function(t){return e.uploadGroupInfo(t.imgUrl)}).then(function(t){200==t.code?(console.log(t),console.log("Create a new group successfully"),e.$router.push({name:"groupDetail",params:{id:t.data.team_id}})):220==t.code&&console.log(t)}).catch(function(t){console.log(t)}):e.uploadGroupInfo(e.logoUrl).then(function(t){console.log(t),console.log("Create a new group successfully"),e.$router.push({name:"groupDetail",params:{id:t.data.team_id}})}).catch(function(t){console.log(t)})):e.$message.error("Fail!")})},cascaderFormat:function(t,e){return t[t.length-1]}},mounted:function(){}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-body"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[t._v("创建小组")]),t._v(" "),a("div",{staticClass:"main-content"},[a("div",{staticClass:"basic-informations"},[a("Form",{ref:"group",staticStyle:{"margin-top":"20px"},attrs:{"label-width":120,model:t.group,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"Name",prop:"team_name"}},[a("Input",{staticClass:"input-style",attrs:{placeholder:"Enter Group Name"},model:{value:t.group.team_name,callback:function(e){t.$set(t.group,"team_name",e)},expression:"group.team_name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"Description",prop:"description"}},[a("Input",{staticClass:"input-style",attrs:{placeholder:"Enter Group Description",type:"textarea",rows:4},model:{value:t.group.description,callback:function(e){t.$set(t.group,"description",e)},expression:"group.description"}})],1),t._v(" "),a("FormItem",{attrs:{label:"Limit",prop:"limit"}},[a("RadioGroup",{staticClass:"margin-left",attrs:{vertical:""},model:{value:t.group.limit,callback:function(e){t.$set(t.group,"limit",e)},expression:"group.limit"}},[a("Radio",{staticStyle:{width:"80px"},attrs:{label:"0"}},[t._v("允许所有人")]),t._v(" "),a("Radio",{staticStyle:{width:"80px"},attrs:{label:"1"}},[t._v("需要审核")]),t._v(" "),a("Radio",{staticStyle:{width:"80px"},attrs:{label:"2"}},[t._v("禁止所有人")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"Tags"}},[a("div",{staticClass:"div-flex"},[a("Cascader",{staticStyle:{width:"90%","margin-right":"10px"},attrs:{data:t.defaultLabels,"render-format":t.cascaderFormat,trigger:"hover"},model:{value:t.currentTeamLabel,callback:function(e){t.currentTeamLabel=e},expression:"currentTeamLabel"}}),t._v(" "),a("Button",{attrs:{icon:"md-add"},on:{click:t.addTeamLabels}},[t._v("Add")])],1),t._v(" "),a("Row",t._l(t.teamlabels,function(e){return a("Tag",{key:e,staticClass:"margin-left",attrs:{type:"border",color:"primary",name:e,closable:""},on:{"on-close":t.handleCloseLabels}},[t._v(t._s(e))])}),1)],1),t._v(" "),a("FormItem",{attrs:{label:"Invited Members",prop:"invMem"}},[a("div",{staticClass:"div-flex"},[a("Input",{staticClass:"input-style2",attrs:{placeholder:"Enter Invited Member's ID"},model:{value:t.currentInvitedMember,callback:function(e){t.currentInvitedMember=e},expression:"currentInvitedMember"}}),t._v(" "),a("Button",{attrs:{icon:"md-add"},on:{click:t.addInvitedMember}},[t._v("Add")])],1),t._v(" "),a("Row",t._l(t.InvitedMemberList,function(e){return a("Tag",{key:e.member_username,staticClass:"margin-left",attrs:{type:"border",color:"primary",name:e.member_username,closable:""},on:{"on-close":t.handleCloseMembers}},[t._v("用户"+t._s(e.member_username))])}),1)],1)],1)],1),t._v(" "),a("div",{staticClass:"logo-content"},[a("div",{staticClass:"logo-title"},[t._v("Logo")]),t._v(" "),a("div",{staticClass:"logo-block"},[a("img",{staticClass:"logo-image",attrs:{id:"logo",src:t.logoUrl,alt:"Group Logo"}}),t._v(" "),a("div",{staticClass:"upload-block"},[a("input",{attrs:{type:"file",id:"upload-input",multiple:"false",accept:"image/*"},on:{change:t.previewImage}}),t._v(" "),a("label",{staticClass:"upload-box",attrs:{for:"upload-input"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])])])]),t._v(" "),a("Button",{staticClass:"button-create",attrs:{type:"success",long:""},on:{click:function(e){return t.createGroup("group")}}},[t._v("CREATE")])],1)])},staticRenderFns:[]};var z=a("VU/8")(j,O,!1,function(t){a("IMS4")},"data-v-bbc7daea",null).exports,H=a("//Fk"),V=a.n(H),Q={data:function(){return{team_id:"",groupList:[],group:{team_name:"",leader:"",logo:"",description:"",limit:"",teamlabels:[],members:[]},enterid:0,enterUser:"",isLeader:!0,showDrawer:!1,showTransferDrawer:!1,taskList:[],defaultTaskList:[{task_id:1,title:"title1",introduction:"简介",money:"10",publisher:"user1",state:"processing",max_accepter_number:"10",type:2,score:4,content:"test"},{task_id:2,title:"title2",introduction:"简介",money:"10",publisher:"user1",state:"processing",max_accepter_number:"10",type:2,score:4,content:"test"},{task_id:3,title:"title3",introduction:"简介",money:"10",publisher:"user1",state:"processing",max_accepter_number:"10",type:2,score:4,content:"test"}],organizationsList:[],currentInvitedMember:"",inviteList:[],showTaskDrawer:-1,loginUser:"HeChX"}},methods:{getGroupDetail:function(t){var e=this,a=new V.a(function(a,s){e.$axios.get("/api/v1/team/Id?team_id="+t).then(function(t){if(200==t.data.code&&0!=t.data.data.length){for(var n={members:[]},i=0,o=t.data.data[0].members.length;i<o;i++)n.members.push({username:t.data.data[0].members[i].member_username});e.$axios.post("/api/v1/user/getteammembersavatat",n).then(function(e){if(200==e.data.code){t.data.data[0].members=[];for(var n=0,i=e.data.data.length;n<i;n++)t.data.data[0].members.push(e.data.data[n]);console.log(t.data.data),a(t)}else s(e)}).catch(function(t){s(t)})}else s(t)}).catch(function(t){s(t)})}),s=new V.a(function(a,s){e.$axios.get("/api/v1/user/getCanPublishTasksOrg?teamId="+t).then(function(t){a(t)}).catch(function(t){s(t)})}),n=new V.a(function(a,s){e.$axios.get("/api/v1/team/Leader?team_id="+t+"&leader=HeChX").then(function(t){a(t)}).catch(function(t){s(t)})}),i=new V.a(function(a,s){e.$axios.get("/api/v1/task?type=all&range="+t+"&username=HeChX").then(function(t){a(t)}).catch(function(t){s(t)})});return V.a.all([a,s,n,i])},getOrganization:function(t){var e=this;return new V.a(function(a,s){e.$axios.get("/api/v1/user/getCanPublishTasksOrg?teamId="+t).then(function(t){a(t)}).catch(function(t){s(t)})})},leader:function(t){var e=this;return new V.a(function(a,s){e.$axios.get("/api/v1/team/Leader?team_id="+t+"&leader=HeChX").then(function(t){a(t)}).catch(function(t){s(t)})})},render:function(t){console.log(t),200==t[0].data.code&&0!=t[0].data.data.length&&(this.group=t[0].data.data[0]),200==t[1].data.code&&(this.organizationsList=t[1].data.data),200==t[2].data.code?this.isLeader=!0:212==t[2].data.code&&(this.isLeader=!1),200==t[3].data.code&&(this.taskList=t[3].data.data)},addInvitedMember:function(){""!==this.currentInvitedMember&&-1==this.inviteList.indexOf(this.currentInvitedMember)&&this.inviteList.push(this.currentInvitedMember)},handleClose:function(t,e){var a=this.inviteList.indexOf(e);this.inviteList.splice(a,1)},inviteMembersComplete:function(){this.showDrawer=!1;var t={};t.team_id=this.team_id,t.leader="hyx",t.user=[];for(var e=0,a=this.inviteList.length;e<a;e++)t.user.push({username:this.inviteList[e]});this.$axios.post("/api/v1/team/Member/Invitation",t).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})},getTaskItem:function(t){this.showTaskDrawer!=t?this.showTaskDrawer=t:this.showTaskDrawer=-1},jumpToTaskDetail:function(t){this.$router.push({name:"taskDetail",params:{id:t}})},dislodge:function(t){var e=this;this.isLeader&&(this.loginUser!=t?this.$Modal.confirm({title:"确认",content:"<p>是否确认移出用户"+t+"</p>",onOk:function(){var a={team_id:e.team_id,leader:e.loginUser,username:t};e.$axios.delete("/api/v1/team/Member/Dislodge",{params:a}).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}}):this.$Modal.info({title:"提示",content:"不能移除自己"}))},blacklist:function(t){console.log("To be continue...")},selectMember:function(t){this.selectMember=t},transferMembersComplete:function(t){var e=this;console.log(t),""!=t&&this.isLeader&&(this.loginUser!=t?this.$Modal.confirm({title:"确认",content:"<p>是否确认将该小组组长转让给"+t+"</p>",onOk:function(){e.$axios.post("/api/v1/team/Leader",{team_id:e.team_id,leader:e.loginUser,username:t}).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}}):this.$Modal.warning({title:"提示",content:"<p>不能转让给自己</p>"}),this.showTransferDrawer=!1)},handleReachBottom:function(){},withdrawGroup:function(){var t=this;this.isLeader||this.$Modal.confirm({title:"确认",content:"<p>确认退出该小组？</p>",onOk:function(){var e={team_id:t.team_id,username:t.loginUser};t.$axios.delete("/api/v1/team/Member/Departure",{params:e}).then(function(e){console.log(e.data),200==e.data.code&&t.$router.push({name:"myGroup"})}).catch(function(t){console.log(t)})}})},dissolveGroup:function(){var t=this;this.isLeader&&this.$Modal.confirm({title:"确认",content:"<p>是否确认解散该小组？</p><p>（解散后不可恢复！）</p>",onOk:function(){var e={team_id:t.team_id,leader:t.loginUser};t.$axios.delete("/api/v1/team",{params:e}).then(function(e){console.log(e.data),200==e.data.code&&t.$router.push({name:"myGroup"})}).catch(function(t){console.log(t)})}})}},mounted:function(){var t=this;this.team_id=this.$route.params.id,console.log("test"+this.$route.params.id),this.getGroupDetail(this.team_id).then(function(e){t.render(e)})}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-body"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-selector-block"},[a("div",{staticStyle:{"margin-left":"15px"}},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:"/MainPage/myGroup"}},[t._v("我的小组")]),t._v(" "),a("BreadcrumbItem",{attrs:{to:{name:"groupDetail",params:{id:t.team_id,group:t.group}}}},[t._v("小组详情")]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.group.team_name))])],1)],1)]),t._v(" "),a("Divider"),t._v(" "),a("div",{staticClass:"main-content"},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"logo-block"},[a("img",{staticClass:"logo-image",attrs:{id:"logo",src:t.group.logo,alt:"Group Logo"}})]),t._v(" "),a("div",{staticClass:"group-name"},[t._v(t._s(t.group.team_name))]),t._v(" "),a("div",{staticClass:"description-block"},[a("div",{staticClass:"property"},[t._v("Description: ")]),t._v(" "),a("div",{staticClass:"inline-block description"},[a("span",{staticClass:"span"},[t._v(t._s(t.group.description))])])]),t._v(" "),a("div",{staticClass:"leader-block"},[a("div",{staticClass:"property"},[t._v("Leader: ")]),t._v(" "),a("div",{staticClass:"inline-block"},[t._v(t._s(t.group.leader))])]),t._v(" "),a("div",{staticClass:"limit-block"},[a("div",{staticClass:"property"},[t._v("Limit: ")]),t._v(" "),a("div",{staticClass:"inline-block"},[t._v(t._s(0==t.group.limit?"允许所有人":1==t.group.limit?"需要审核":"禁止所有人"))])]),t._v(" "),a("div",{staticClass:"createAt-block"},[a("div",{staticClass:"property"},[t._v("Create Time: ")]),t._v(" "),a("div",{staticClass:"inline-block"},[t._v(t._s(t.group.createdAt))])]),t._v(" "),a("div",{staticClass:"tags-block"},[a("div",{staticClass:"property"},[t._v("Team Labels: ")]),t._v(" "),a("div",{staticClass:"tags-list"},t._l(t.group.teamlabels,function(e){return a("Tag",{key:e.label,staticClass:"tags",attrs:{type:"dot",color:"primary",name:e.label}},[t._v(t._s(e.label))])}),1)]),t._v(" "),a("div",{staticClass:"modify-info"},[a("Button",{staticClass:"button-modify",class:{hidden:!t.isLeader},attrs:{type:"info",long:"",to:{name:"modifyGroupInfo",params:{id:t.team_id,group:t.group}}}},[t._v("修改资料")])],1)]),t._v(" "),a("div",{staticClass:"middle-content"},[a("div",{staticClass:"group-task-block"},[t._m(0),t._v(" "),0!=t.taskList.length?a("div",{staticClass:"group-task-list"},t._l(t.taskList,function(e){return a("div",[a("div",{class:{"task-card":!0,"task-card-mouseenter":t.enterid==e.task_id,"task-card-mouseleave":!(t.enterid==e.task_id)},on:{mouseenter:function(a){t.enterid=e.task_id},mouseleave:function(e){t.enterid=0},click:function(a){return t.jumpToTaskDetail(e.task_id)}}},[a("div",{staticClass:"task-title"},[a("span",[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"task-simpleinfo"},[a("span",[t._v(t._s(e.introduction)+" ")])]),t._v(" "),a("div",{staticClass:"task-profit"},[a("span",[t._v(t._s(e.money))])]),t._v(" "),a("div",{staticClass:"task-detail"},[a("span",[t._v("数量:"+t._s(e.max_accepter_numbert))]),t._v(" "),a("span",[t._v("发布人: "+t._s(e.publisher))])])])])}),0):a("div",{staticClass:"group-task-title"},[a("span",{staticStyle:{"font-size":"10pt"}},[t._v("该小组还没有任务，赶紧去发布任务吧！")])])])]),t._v(" "),a("div",{staticClass:"right-content"},[a("Tabs",{attrs:{value:"name1"}},[a("TabPane",{attrs:{label:"成员列表",name:"name1"}},[a("div",{staticClass:"member-list"},[a("Scroll",{attrs:{"on-reach-bottom":t.handleReachBottom,height:"250"}},t._l(t.group.members,function(e){return a("div",{key:e.username,staticClass:"member-item"},[a("div",{staticClass:"profile"},[a("Avatar",{attrs:{src:e.avatar,size:"small"}})],1),t._v(" "),a("div",{staticClass:"member-username"},[a("span",{staticClass:"username-span"},[t._v(t._s(e.username))])]),t._v(" "),a("Button",{staticClass:"button-blacklist",class:{hidden:!t.isLeader},on:{click:function(a){return t.dislodge(e.username)}}},[t._v("移除")]),t._v(" "),a("Button",{staticClass:"button-blacklist",on:{click:function(a){return t.blacklist(e.username)}}},[t._v("拉黑")])],1)}),0),t._v(" "),a("div",{staticClass:"withdraw"},[a("Button",{staticClass:"invite-button",attrs:{type:"dashed",long:"",icon:"ios-add"},on:{click:function(e){t.showDrawer=!0}}},[t._v("Invite members")]),t._v(" "),a("Button",{class:{"withdraw-button":!0,hidden:!t.isLeader},attrs:{type:"primary",long:""},on:{click:function(e){t.showTransferDrawer=!0,t.selectMember=""}}},[t._v("转让该小组")])],1),t._v(" "),a("Drawer",{attrs:{title:"Invite users",width:"100","mask-closable":!1,transfer:!1,inner:!0},model:{value:t.showDrawer,callback:function(e){t.showDrawer=e},expression:"showDrawer"}},[a("Form",{attrs:{"label-position":"top"}},[a("FormItem",{attrs:{label:"Invited Members"}},[a("div",{staticClass:"div-flex"},[a("Input",{staticStyle:{margin:"5px 0px"},attrs:{placeholder:"Enter Invited Member's ID"},model:{value:t.currentInvitedMember,callback:function(e){t.currentInvitedMember=e},expression:"currentInvitedMember"}}),t._v(" "),t._l(t.inviteList,function(e){return a("Tag",{key:e,staticClass:"margin-left",attrs:{type:"border",color:"primary",name:e,closable:""},on:{"on-close":t.handleClose}},[t._v("用户"+t._s(e))])})],2),t._v(" "),a("Row",[a("Button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:t.addInvitedMember}},[t._v("Add")])],1)],1)],1),t._v(" "),a("div",{staticClass:"invite-complete"},[a("Button",{attrs:{type:"success",long:""},on:{click:t.inviteMembersComplete}},[t._v("完成添加")])],1)],1),t._v(" "),a("Drawer",{attrs:{title:"Choose member",width:"100","mask-closable":!1,transfer:!1,inner:!0},model:{value:t.showTransferDrawer,callback:function(e){t.showTransferDrawer=e},expression:"showTransferDrawer"}},[t._l(t.group.members,function(e){return a("div",{key:e.username},[a("div",{class:{"member-item":!0,"user-item-mouseenter":t.enterUser==e.username&&!(t.selectMember==e.username),"user-item-mouseleave":!(t.enterUser==e.username||t.selectMember==e.username),"user-item-selected":t.selectMember==e.username},on:{mouseenter:function(a){t.enterUser=e.username},mouseleave:function(e){t.enterUser=""},click:function(a){t.selectMember=e.username}}},[a("div",{staticClass:"profile"},[a("Avatar",{attrs:{src:e.avatar,size:"small"}})],1),t._v(" "),a("div",{staticClass:"member-username"},[a("span",{staticClass:"username-span"},[t._v(t._s(e.username))])])])])}),t._v(" "),a("div",{staticClass:"transfer-complete"},[a("Button",{attrs:{type:"success",long:""},on:{click:function(e){return t.transferMembersComplete(t.selectMember)}}},[t._v("确认转让")])],1)],2)],1)]),t._v(" "),a("TabPane",{attrs:{label:"机构列表",name:"name2"}},[0!=t.organizationsList.length?a("div",{staticClass:"member-list"},[a("Scroll",{attrs:{"on-reach-bottom":t.handleReachBottom,height:"330"}},t._l(t.organizationsList,function(e){return a("div",{key:e.username,staticClass:"member-item"},[a("div",{staticClass:"profile"},[a("Avatar",{attrs:{src:e.profile,size:"small"}})],1),t._v(" "),a("div",{staticClass:"member-username"},[a("span",{staticClass:"username-span"},[t._v(t._s(e.username))])]),t._v(" "),a("Button",{staticClass:"button-blacklist",class:{hidden:!t.isLeader},on:{click:function(a){return t.dislodge(e.username)}}},[t._v("移除")])],1)}),0)],1):a("div",{staticClass:"member-list"},[a("Scroll",{attrs:{"on-reach-bottom":t.handleReachBottom,height:"330"}},[a("div",{staticClass:"no-organization"},[t._v("无机构")])])],1)])],1),t._v(" "),a("Button",{class:{"withdraw-button":!0,hidden:t.isLeader},attrs:{type:"error",long:""},on:{click:t.withdrawGroup}},[t._v("退出该小组")]),t._v(" "),a("Button",{class:{"withdraw-button":!0,hidden:!t.isLeader},attrs:{type:"error",long:""},on:{click:t.dissolveGroup}},[t._v("解散该小组")])],1)])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"group-task-title"},[e("span",[this._v("组内发布的任务")])])}]};var X=a("VU/8")(Q,W,!1,function(t){a("SPSM")},"data-v-11628671",null).exports,J=a("//Fk"),Y=a.n(J),K=a("pFYg"),Z=a.n(K),tt={data:function(){return{team_id:"",group:"",screenWidth:document.body.clientWidth,defaultLabels:[{value:"体育",label:"体育",children:[{value:"足球",label:"足球"},{value:"网球",label:"网球"},{value:"乒乓球",label:"乒乓球"},{value:"篮球",label:"篮球"},{value:"排球",label:"排球"},{value:"游泳",label:"游泳"},{value:"太极",label:"太极"},{value:"龙舟",label:"龙舟"},{value:"棒球",label:"棒球"},{value:"跆拳道",label:"跆拳道"},{value:"健美操",label:"健美操"}]},{value:"学习",label:"学习",children:[{value:"专业",label:"专业",children:[{value:"计算机类",label:"计算机类"},{value:"软件工程",label:"软件工程"},{value:"其他专业",label:"其他专业"}]},{value:"课程",label:"课程",children:[{value:"高等数学",label:"高等数学"},{value:"线性代数",label:"线性代数"},{value:"其他课程",label:"其他课程"}]}]},{value:"兴趣",label:"兴趣",children:[{value:"舞蹈",label:"舞蹈"},{value:"音乐",label:"音乐"},{value:"钢琴",label:"钢琴"},{value:"吉他",label:"吉他"}]}],currentTeamLabel:[],teamlabels:[],logoUrl:"",logoFile:""}},methods:{cascaderFormat:function(t,e){return t[t.length-1]},addTeamLabels:function(){console.log(this.currentTeamLabel);var t;0!=(t=this.currentTeamLabel.length)&&-1==this.teamlabels.indexOf(this.currentTeamLabel[t-1])&&(this.teamlabels.push(this.currentTeamLabel[t-1]),this.currentTeamLabel=[])},handleCloseLabels:function(t,e){var a=this.teamlabels.indexOf(e);this.teamlabels.splice(a,1)},previewImage:function(t){var e=this;if(this.logoFile=t.target.files[0],"undefine"!=!("undefined"==typeof FileReader||Z.a(FileReader))){var a=new FileReader;a.readAsDataURL(this.logoFile),a.onload=function(t){e.logoUrl=a.result}}},uploadLogoImage:function(){var t=this,e=new FormData;return e.append("file",this.logoFile),new Y.a(function(a,s){t.$axios.post("/api/v1/file/TeamLogo",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t.data),a(t.data.data)}).catch(function(t){s(t)})})},uploadGroupInfo:function(t){var e=this;this.group.logo=t;var a=this.teamlabels.length;this.group.teamlabels=[];for(var s=0;s<a;s++)this.group.teamlabels.push({label:this.teamlabels[s]});return console.log(this.group),new Y.a(function(t,a){e.$axios.put("/api/v1/team",e.group).then(function(e){t(e.data)}).catch(function(t){a(t)})})},modifyInfo:function(){var t=this;""!=this.logoFile?this.uploadLogoImage().then(function(e){return t.uploadGroupInfo(e.imgUrl)}).then(function(e){console.log(e),console.log("Modify the group information successfully"),t.$router.push({name:"groupDetail",params:{id:e.data.team_id}})}).catch(function(t){console.log(t)}):this.uploadGroupInfo(this.logoUrl).then(function(e){console.log(e),console.log("Modify the group information successfully"),t.$router.push({name:"groupDetail",params:{id:e.data.team_id}})}).catch(function(t){console.log(t)})},render:function(){for(var t=0,e=this.group.teamlabels.length;t<e;t++)this.teamlabels.push(this.group.teamlabels[t].label);this.logoUrl=this.group.logo}},mounted:function(){this.team_id=this.$route.params.id,this.group=this.$route.params.group,this.render()}},et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-body"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-selector-block"},[a("div",{staticStyle:{"margin-left":"15px"}},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:"/MainPage/myGroup"}},[t._v("我的小组")]),t._v(" "),a("BreadcrumbItem",{attrs:{to:{name:"groupDetail",params:{id:t.team_id,group:t.group}}}},[t._v("小组详情")]),t._v(" "),a("BreadcrumbItem",{attrs:{to:{name:"groupDetail",params:{id:t.team_id,group:t.group}}}},[t._v(t._s(t.group.team_name))]),t._v(" "),a("BreadcrumbItem",[t._v("修改资料")])],1)],1)]),t._v(" "),a("Divider"),t._v(" "),a("div",{staticClass:"main-content"},[a("div",{staticClass:"basic-informations"},[a("Form",{staticStyle:{"margin-top":"20px"},attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"Name"}},[a("Input",{staticClass:"input-style",attrs:{placeholder:"Enter Group Name"},model:{value:t.group.team_name,callback:function(e){t.$set(t.group,"team_name",e)},expression:"group.team_name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"Description"}},[a("Input",{staticClass:"input-style",attrs:{placeholder:"Enter Group Description",type:"textarea",rows:4},model:{value:t.group.description,callback:function(e){t.$set(t.group,"description",e)},expression:"group.description"}})],1),t._v(" "),a("FormItem",{attrs:{label:"Limit"}},[a("RadioGroup",{staticClass:"margin-left",attrs:{vertical:""},model:{value:t.group.limit,callback:function(e){t.$set(t.group,"limit",e)},expression:"group.limit"}},[a("Radio",{staticStyle:{width:"80px"},attrs:{label:"0"}},[t._v("允许所有人")]),t._v(" "),a("Radio",{staticStyle:{width:"80px"},attrs:{label:"1"}},[t._v("需要审核")]),t._v(" "),a("Radio",{staticStyle:{width:"80px"},attrs:{label:"2"}},[t._v("禁止所有人")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"Tags"}},[a("div",{staticClass:"div-flex"},[a("Cascader",{staticStyle:{width:"90%","margin-right":"10px"},attrs:{data:t.defaultLabels,"render-format":t.cascaderFormat,trigger:"hover"},model:{value:t.currentTeamLabel,callback:function(e){t.currentTeamLabel=e},expression:"currentTeamLabel"}}),t._v(" "),a("Button",{attrs:{icon:"md-add"},on:{click:t.addTeamLabels}},[t._v("Add")])],1),t._v(" "),a("Row",t._l(t.teamlabels,function(e){return a("Tag",{key:e,staticClass:"margin-left",attrs:{type:"border",color:"primary",name:e,closable:""},on:{"on-close":t.handleCloseLabels}},[t._v(t._s(e))])}),1)],1)],1)],1),t._v(" "),a("div",{staticClass:"logo-content"},[a("div",{staticClass:"logo-title"},[t._v("Logo")]),t._v(" "),a("div",{staticClass:"logo-block"},[a("img",{staticClass:"logo-image",attrs:{id:"logo",src:t.logoUrl,alt:"Group Logo"}}),t._v(" "),a("div",{staticClass:"upload-block"},[a("input",{attrs:{type:"file",id:"upload-input",multiple:"false",accept:"image/*"},on:{change:t.previewImage}}),t._v(" "),a("label",{staticClass:"upload-box",attrs:{for:"upload-input"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])])])]),t._v(" "),a("div",{staticClass:"modify-block"},[a("Button",{staticClass:"button-modify",attrs:{type:"success",long:""},on:{click:t.modifyInfo}},[t._v("MODIFY")])],1)],1)])},staticRenderFns:[]};var at=a("VU/8")(tt,et,!1,function(t){a("++JQ")},"data-v-6bcd9445",null).exports,st=a("mP1F"),nt={data:function(){return{ruleValidate:{username:[{required:!0,message:"请输入您的用户名",trigger:"blur"}],password:[{required:!0,message:"请输入您的密码",trigger:"blur"}]},userLoginInfo:{username:"",password:""}}},methods:{login:function(t,e){var a=this;this.$refs[t].validate(function(t){t?a.$axios({method:"post",url:"/api/v1/user/login",data:{type:e,username:a.userLoginInfo.username,password:st(a.userLoginInfo.password).toString()}}).then(function(t){200==t.data.code?(a.$Message.success(t.data.msg),a.$router.push({name:"MainPage"})):a.$Message.error(t.data.msg)}).catch(function(t){console.log(t),a.$Message.error(t.response.statusText)}):a.$Message.error("Fail!")})}}},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("Header",{staticClass:"layout-header"},[a("span",{staticClass:"login-nav"},[a("router-link",{attrs:{to:"/register"}},[t._v("注册")])],1)]),t._v(" "),a("Content",[a("div",{staticClass:"login-contain"},[a("Tabs",[a("TabPane",{attrs:{label:"用户登录"}},[a("Form",{ref:"userLoginForm",attrs:{rules:t.ruleValidate,model:t.userLoginInfo}},[a("FormItem",{attrs:{prop:"username"}},[a("Input",{attrs:{prefix:"ios-contact",placeholder:"username"},model:{value:t.userLoginInfo.username,callback:function(e){t.$set(t.userLoginInfo,"username",e)},expression:"userLoginInfo.username"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"password"}},[a("Input",{attrs:{type:"password",prefix:"ios-lock",placeholder:"password"},model:{value:t.userLoginInfo.password,callback:function(e){t.$set(t.userLoginInfo,"password",e)},expression:"userLoginInfo.password"}})],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary",long:""},on:{click:function(e){return t.login("userLoginForm","0")}}},[t._v("登录")])],1)],1)],1),t._v(" "),a("TabPane",{attrs:{label:"机构登录"}},[a("Form",{ref:"orLoginForm",attrs:{rules:t.ruleValidate,model:t.userLoginInfo}},[a("FormItem",{attrs:{prop:"username"}},[a("Input",{attrs:{prefix:"ios-contacts",placeholder:"username"},model:{value:t.userLoginInfo.username,callback:function(e){t.$set(t.userLoginInfo,"username",e)},expression:"userLoginInfo.username"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"password"}},[a("Input",{attrs:{type:"password",prefix:"ios-lock",placeholder:"password"},model:{value:t.userLoginInfo.password,callback:function(e){t.$set(t.userLoginInfo,"password",e)},expression:"userLoginInfo.password"}})],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary",long:""},on:{click:function(e){return t.login("orLoginForm","1")}}},[t._v("登录")])],1)],1)],1)],1)],1)])],1)],1)},staticRenderFns:[]};var ot=a("VU/8")(nt,it,!1,function(t){a("M4bn"),a("G18S")},"data-v-0d0591b0",null).exports,rt=a("mP1F"),lt={data:function(){var t=this;return{userRuleValidate:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],confirmPassword:[{required:!0,validator:function(e,a,s){""===a?s(new Error("请再次输入您的密码")):a!==t.userInfo.password?s(new Error("两次密码不一致")):s()},trigger:"blur"}],name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],school:[{required:!0,message:"学校不能为空",trigger:"blur"}],grade:[{required:!0,message:"年级不能为空",trigger:"blur"}]},userType:"0",defaultAvatarImg:"https://i.loli.net/2017/08/21/599a521472424.jpg",userInfo:{username:"",password:"",confirmPassword:"",name:"",school:"",grade:"1",phone:"",weChat:"",qq:"",avatarImg:""},orgInfo:{}}},methods:{dataURLtoBlob:function(t){for(var e=t.split(","),a=e[0].match(/:(.*?);/)[1],s=atob(e[1]),n=s.length,i=new Uint8Array(n);n--;)i[n]=s.charCodeAt(n);return new Blob([i],{type:a})},fileToDataURL:function(t,e){var a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsDataURL(t)},avatarImgUpload:function(t){var e=this,a=t.target.files[0];a?this.fileToDataURL(a,function(t){e.userInfo.avatarImg=t}):this.userInfo.avatarImg=""},userRegisterSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a=new FormData;for(var s in a.append("type","0"),e.userInfo)if("confirmPassword"!=s)if("avatarImg"==s){if(e.userInfo.avatarImg){var n=e.dataURLtoBlob(e.userInfo.avatarImg);a.append("avatar",n)}}else"password"==s?a.append("password",rt(e.userInfo.password).toString()):a.append(s,e.userInfo[s]);e.$axios({method:"post",url:"/api/v1/user/create",data:a,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(t){200==t.data.code?(e.$Message.success("注册成功！"),e.$router.push({name:"login"})):e.$Message.error(t.data.msg)}).catch(function(t){e.$Message.error(t.response.statusText)})}else e.$Message.error("Fail!")})},handleReset:function(t){this.$refs[t].resetFields()}}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("Header",{staticClass:"layout-header"},[a("span",{staticClass:"login-nav"},[a("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)]),t._v(" "),a("Content",[a("Row",[a("Col",{attrs:{span:"5",offset:"2"}},[a("div",{staticClass:"avatar-box"},[a("img",{attrs:{src:t.userInfo.avatarImg||t.defaultAvatarImg}}),t._v(" "),a("label",{staticClass:"img-upload-box avatar-upload-box",attrs:{for:"fileInput"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1),t._v(" "),a("input",{attrs:{id:"fileInput",type:"file"},on:{change:t.avatarImgUpload}})]),t._v(" "),a("Select",{staticStyle:{width:"75%",float:"left"},model:{value:t.userType,callback:function(e){t.userType=e},expression:"userType"}},[a("Option",{attrs:{value:"0",label:"用户注册"}}),t._v(" "),a("Option",{attrs:{value:"1",label:"机构注册"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"13"}},["0"==t.userType?[a("Form",{ref:"infoForm",attrs:{model:t.userInfo,rules:t.userRuleValidate,"label-position":"right","label-width":80}},[a("FormItem",{attrs:{label:"用户名",prop:"username"}},[a("Input",{attrs:{placeholder:"username"},model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}})],1),t._v(" "),a("FormItem",{attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{placeholder:"password"},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}})],1),t._v(" "),a("FormItem",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("Input",{attrs:{placeholder:"confirm password"},model:{value:t.userInfo.confirmPassword,callback:function(e){t.$set(t.userInfo,"confirmPassword",e)},expression:"userInfo.confirmPassword"}})],1),t._v(" "),a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"real name"},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"学校",prop:"school"}},[a("Input",{attrs:{placeholder:"school"},model:{value:t.userInfo.school,callback:function(e){t.$set(t.userInfo,"school",e)},expression:"userInfo.school"}})],1),t._v(" "),a("FormItem",{attrs:{label:"年级",prop:"grade"}},[a("Select",{model:{value:t.userInfo.grade,callback:function(e){t.$set(t.userInfo,"grade",e)},expression:"userInfo.grade"}},[a("Option",{attrs:{value:"1"}},[t._v("大一")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("大二")]),t._v(" "),a("Option",{attrs:{value:"3"}},[t._v("大三")]),t._v(" "),a("Option",{attrs:{value:"4"}},[t._v("大四")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"电话",prop:"phone"}},[a("Input",{attrs:{placeholder:"phone"},model:{value:t.userInfo.phone,callback:function(e){t.$set(t.userInfo,"phone",e)},expression:"userInfo.phone"}})],1),t._v(" "),a("FormItem",{attrs:{label:"微信",prop:"weChat"}},[a("Input",{attrs:{placeholder:"WeChat"},model:{value:t.userInfo.weChat,callback:function(e){t.$set(t.userInfo,"weChat",e)},expression:"userInfo.weChat"}})],1),t._v(" "),a("FormItem",{attrs:{label:"qq",prop:"qq"}},[a("Input",{attrs:{placeholder:"qq"},model:{value:t.userInfo.qq,callback:function(e){t.$set(t.userInfo,"qq",e)},expression:"userInfo.qq"}})],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.userRegisterSubmit("infoForm")}}},[t._v("Submit")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("infoForm")}}},[t._v("Reset")])],1)],1)]:[t._v("\n            2\n\n\n\n\n          ")]],2)],1)],1)],1)],1)},staticRenderFns:[]};var ut=a("VU/8")(lt,ct,!1,function(t){a("XYsA")},"data-v-bc79b38a",null).exports,dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("Header",{staticClass:"layout-header"},[a("span",{staticClass:"login-nav"},[a("router-link",{attrs:{to:"/MainPage"}},[t._v("主站")])],1)]),t._v(" "),a("Content",[a("div",{staticClass:"content"},[a("div",{staticClass:"h"},[a("img",{attrs:{src:t.userInfo.avatar,alt:""}}),t._v(" "),a("div",{staticClass:"username"},[t._v(t._s(t.userInfo.username))]),t._v(" "),a("div",{staticClass:"action"},[a("Dropdown",[a("a",{attrs:{href:"javascript:void(0)"}},[a("Icon",{attrs:{type:"ios-more",size:"24",color:"white"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[t._v("加入黑名单")])],1)],1)],1)]),t._v(" "),a("Tabs",{attrs:{value:"info"}},[a("TabPane",{attrs:{label:"个人信息",name:"info"}},[a("div",{staticClass:"info"},[a("h2",[t._v("个人信息")]),t._v(" "),a("div",{staticClass:"info-row"},[t._v("性名： "),a("span",[t._v(t._s(t.userInfo.name))])]),t._v(" "),a("div",{staticClass:"info-row"},[t._v("学校： "),a("span",[t._v(t._s(t.userInfo.school))])]),t._v(" "),a("div",{staticClass:"info-row"},[t._v("年级： "),a("span",[t._v(t._s(t.userInfo.grade))])]),t._v(" "),a("div",{staticClass:"info-row"},[t._v("电话： "),a("span",[t._v(t._s(t.userInfo.phone))])]),t._v(" "),a("div",{staticClass:"info-row"},[t._v("微信： "),a("span",[t._v(t._s(t.userInfo.wechat))])]),t._v(" "),a("div",{staticClass:"info-row"},[t._v("qq： "),a("span",[t._v(t._s(t.userInfo.qq))])])])]),t._v(" "),a("TabPane",{attrs:{label:"正在发布的任务",name:"waitedTask"}},[a("ul",t._l(t.waitedTasks,function(e){return a("li",[a("router-link",{attrs:{to:"/MainPage/taskDetail/"+e.taskId}},[a("Row",{staticClass:"history"},[a("Col",{attrs:{span:"16"}},[a("h2",[t._v("历史任务")]),t._v(" "),a("h3",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                        "+t._s(e.title)+"\n                        "),a("span",{staticStyle:{color:"#ed4014","margin-left":"10px"}},[t._v("\n                            "+t._s(e.money)+"￥\n                          ")])]),t._v(" "),a("p",[t._v(t._s(e.introduction))])]),t._v(" "),a("Col",{staticStyle:{"text-align":"center",position:"absolute",right:"0",bottom:"40px"},attrs:{span:"8"}},[a("p",[t._v(t._s(e.starttime)+" ~")]),t._v(" "),a("p",[t._v(t._s(e.endtime)+"   ")])])],1)],1)],1)}),0)]),t._v(" "),a("TabPane",{attrs:{label:"发布过的任务",name:"publishedFinishedTask"}},[a("ul",t._l(t.publishedFinishedTasks,function(e){return a("li",[a("Row",{staticClass:"history"},[a("Col",{attrs:{span:"16"}},[a("h2",[t._v("历史任务")]),t._v(" "),a("h3",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                      "+t._s(e.title)+"\n                      "),a("span",{staticStyle:{color:"#ed4014","margin-left":"10px"}},[t._v("\n                          "+t._s(e.money)+"￥\n                        ")])]),t._v(" "),a("p",[t._v(t._s(e.introduction))])]),t._v(" "),a("Col",{staticStyle:{"text-align":"center",position:"absolute",right:"0",bottom:"10px"},attrs:{span:"8"}},[a("p",[t._v(t._s(e.endtime)+" ")]),t._v(" "),a("Rate",{attrs:{"allow-half":"","show-text":"",disabled:""},model:{value:e.score,callback:function(a){t.$set(e,"score",a)},expression:"task.score"}},[a("span",{staticStyle:{color:"#f5a623"}},[t._v(t._s(e.score))])])],1)],1)],1)}),0)]),t._v(" "),a("TabPane",{attrs:{label:"已完成的任务",name:"finishedTask"}},[a("ul",t._l(t.finishedTasks,function(e){return a("li",[a("Row",{staticClass:"history"},[a("Col",{attrs:{span:"16"}},[a("h2",[t._v("历史任务")]),t._v(" "),a("h3",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                        "+t._s(e.title)+"\n                        "),a("span",{staticStyle:{color:"#ed4014","margin-left":"10px"}},[t._v("\n                          "+t._s(e.money)+"￥\n                        ")])]),t._v(" "),a("p",[t._v(t._s(e.introduction))])]),t._v(" "),a("Col",{staticStyle:{"text-align":"center",position:"absolute",right:"0",bottom:"10px"},attrs:{span:"8"}},[a("p",[t._v(t._s(e.endtime)+" ")]),t._v(" "),a("Rate",{attrs:{"allow-half":"","show-text":"",disabled:""},model:{value:e.score,callback:function(a){t.$set(e,"score",a)},expression:"task.score"}},[a("span",{staticStyle:{color:"#f5a623"}},[t._v(t._s(e.score))])])],1)],1)],1)}),0)])],1)],1)])],1)],1)},staticRenderFns:[]};var pt=a("VU/8")({data:function(){return{userInfo:{},waitedTasks:[],publishedFinishedTasks:[],finishedTasks:[]}},methods:{getInfo:function(){var t=this;this.userInfo={},this.waitedTasks=this.publishedFinishedTasks=this.finishedTasks=[],this.$axios.get("/api/v1/user/getuser?username="+this.$route.params.username).then(function(e){200==e.data.code&&(t.userInfo=e.data.data)}).catch(function(e){t.$Message.error("用户不存在！")}),this.$axios.get("/api/v1/user/getAcceptedFinishedTasks?username="+this.$route.params.username).then(function(e){200==e.data.code&&(t.finishedTasks=e.data.data)}),this.$axios.get("/api/v1/user/getPublishedFinishedTasks?username="+this.$route.params.username).then(function(e){200==e.data.code&&(t.publishedFinishedTasks=e.data.data)}),this.$axios.get("/api/v1/user/getPublishedWaitedTasks?username="+this.$route.params.username).then(function(e){200==e.data.code&&(t.waitedTasks=e.data.data)})}},created:function(){this.getInfo()},watch:{"$route.query":"getInfo"}},dt,!1,function(t){a("bUjZ"),a("Edhj")},"data-v-d21a9d4a",null).exports,mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("p",{staticClass:"p-balance"},[t._v("\n    账户余额："),a("span",{staticClass:"span-balance"},[t._v(t._s(t.balance))]),t._v(" 元\n  ")]),t._v(" "),a("p",{staticClass:"p-amount"},[t._v("充值金额")]),t._v(" "),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"select-amount",class:{"is-selected":"1"==t.money},on:{click:function(e){t.money="1"}}},[t._v("1元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"5"==t.money},on:{click:function(e){t.money="5"}}},[t._v("5元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"10"==t.money},on:{click:function(e){t.money="10"}}},[t._v("10元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"20"==t.money},on:{click:function(e){t.money="20"}}},[t._v("20元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"50"==t.money},on:{click:function(e){t.money="50"}}},[t._v("50元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"100"==t.money},on:{click:function(e){t.money="100"}}},[t._v("100元")]),t._v(" "),a("div",{staticClass:"select-amount custom-amount",class:{"is-selected":""==t.money}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.customInputMoney,expression:"customInputMoney"}],attrs:{placeholder:"其他数量"},domProps:{value:t.customInputMoney},on:{click:function(e){t.money=""},input:function(e){e.target.composing||(t.customInputMoney=e.target.value)}}}),t._v("元\n    ")])]),t._v(" "),a("p",{staticClass:"pay-amount"},[t._v("支付金额："),a("span",[t._v("￥"+t._s(t.money?t.money:t.customInputMoney))])]),t._v(" "),a("Button",{staticClass:"pay-button",attrs:{type:"info"}},[t._v("立即充值")])],1)},staticRenderFns:[]};var vt=a("VU/8")({data:function(){return{money:"1",customInputMoney:"",balance:"36"}},mounted:function(){},computed:{},methods:{}},mt,!1,function(t){a("JvdK")},"data-v-718ebd22",null).exports,ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("p",{staticClass:"p-balance"},[t._v("\n    账户余额："),a("span",{staticClass:"span-balance"},[t._v(t._s(t.balance))]),t._v(" 元\n  ")]),t._v(" "),a("p",{staticClass:"p-amount"},[t._v("提现金额")]),t._v(" "),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"select-amount",class:{"is-selected":"1"==t.money},on:{click:function(e){t.money="1"}}},[t._v("1元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"5"==t.money},on:{click:function(e){t.money="5"}}},[t._v("5元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"10"==t.money},on:{click:function(e){t.money="10"}}},[t._v("10元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"20"==t.money},on:{click:function(e){t.money="20"}}},[t._v("20元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"50"==t.money},on:{click:function(e){t.money="50"}}},[t._v("50元")]),t._v(" "),a("div",{staticClass:"select-amount",class:{"is-selected":"100"==t.money},on:{click:function(e){t.money="100"}}},[t._v("100元")]),t._v(" "),a("div",{staticClass:"select-amount custom-amount",class:{"is-selected":""==t.money}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.customInputMoney,expression:"customInputMoney"}],attrs:{placeholder:"其他数量"},domProps:{value:t.customInputMoney},on:{click:function(e){t.money=""},input:function(e){e.target.composing||(t.customInputMoney=e.target.value)}}}),t._v("元\n    ")])]),t._v(" "),a("p",{staticClass:"pay-amount"},[t._v("提现金额："),a("span",[t._v("￥"+t._s(t.money?t.money:t.customInputMoney))])]),t._v(" "),a("Button",{staticClass:"pay-button",attrs:{type:"info"}},[t._v("立即提现")])],1)},staticRenderFns:[]};var ft=a("VU/8")({data:function(){return{money:"1",customInputMoney:"",balance:"36"}},mounted:function(){},computed:{},methods:{}},ht,!1,function(t){a("jxOF")},"data-v-5decfec2",null).exports,_t=a("mvHQ"),gt=a.n(_t),bt={data:function(){return{username:"yao",isFirst:!0,answer:[],questionnaire:[{type:0,question:"单选题1",choices:[{label:"A"},{label:"B"}],answer:""},{type:0,question:"单选题2",choices:[{label:"C"},{label:"D"}],answer:""},{type:1,question:"多选题",choices:[{label:"C"},{label:"D"},{label:"E"}],answer:[]},{type:2,question:"简答题",answer:""}],single:[],mutiple:[],simple:[],questionnaire_path:""}},mounted:function(){this.questionnaire_path=this.$route.params.url,this.getQuestionnaire(this.questionnaire_path)},methods:{getQuestionnaire:function(t){var e=this,a="/uploads/questionnaire/"+t.substring(t.lastIndexOf("/")+1);this.$axios.get(a,{}).then(function(t){var a=t.data;200==t.status&&(e.questionnaire=a.questions,e.getQuestions(e.questionnaire))}).catch(function(t){console.log("Fail to request")})},getQuestions:function(t){for(var e=0;e<t.length;e++){var a=t[e],s=a.type;a.index=e+1,0==s?(this.answer.push(""),this.single.push(a)):1==s?(this.answer.push([]),this.mutiple.push(a)):2==s&&(this.answer.push(""),this.simple.push(a))}},postAnswer:function(t){var e=this;this.isFirst=!1;for(var a=0;a<t.length;a++){if(""==this.answer[a]||this.answer[a]==[])return void this.$Notice.warning({title:"Questions Lack Answer",desc:"Please complete the questionnaire "});t[a].answer=this.answer[a]}var s=new FormData,n=gt.a(t),i=new Date,o=new Blob([n],{type:"application/json",lastModified:i});s.append("file",o),this.$axios.post("/api/v1/file/TeamLogo",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log("test");var e=t.data;console.log(t.data),e.code}).catch(function(t){e.$Notice.warning({title:"Task Uploading Error",desc:"Fail to Upload the Questionnaire "})})}}},yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"questionnaire-body"},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[t._v("XXXXXX调查问卷")]),t._v(" "),a("div",{staticClass:"single-body"},t._l(t.single,function(e){return a("div",{staticClass:"single-item"},[a("p",{class:{"warning-question":""==t.answer[e.index-1]&&!t.isFirst}},[t._v(t._s(e.index)+". "+t._s(e.question))]),t._v(" "),a("RadioGroup",{model:{value:t.answer[e.index-1],callback:function(a){t.$set(t.answer,e.index-1,a)},expression:"answer[item.index-1]"}},t._l(e.choice,function(e,s){return a("Radio",{key:e.label,attrs:{label:e.label}},[a("span",{staticClass:"span-choice"},[t._v(t._s(e.label))])])}),1)],1)}),0),t._v(" "),a("div",{staticClass:"mutiple-body"},t._l(t.mutiple,function(e,s){return a("div",{staticClass:"mutiple-item"},[a("p",{class:{"warning-question":0==t.answer[e.index-1].length&&!t.isFirst}},[t._v(t._s(e.index)+". "+t._s(e.question))]),t._v(" "),a("CheckboxGroup",{model:{value:t.answer[e.index-1],callback:function(a){t.$set(t.answer,e.index-1,a)},expression:"answer[item.index-1]"}},t._l(e.choice,function(e,s){return a("Checkbox",{key:e.label,attrs:{label:e.label}},[a("span",{staticClass:"span-choice"},[t._v(t._s(e.label))])])}),1)],1)}),0),t._v(" "),a("div",{staticClass:"simple-body"},t._l(t.simple,function(e){return a("div",{staticClass:"simple-item"},[a("p",{class:{"warning-question":""==t.answer[e.index-1]&&!t.isFirst}},[t._v(t._s(e.index)+". "+t._s(e.question))]),t._v(" "),a("Input",{staticStyle:{width:"100%",position:"relative"},attrs:{placeholder:"Enter task title",type:"textarea",rows:10},model:{value:t.answer[e.index-1],callback:function(a){t.$set(t.answer,e.index-1,a)},expression:"answer[item.index-1]"}})],1)}),0),t._v(" "),a("Button",{staticStyle:{"font-size":"14px"},attrs:{type:"primary",long:""},on:{click:function(e){return t.postAnswer(t.questionnaire)}}},[t._v("提交")]),t._v(" "),a("div",[t._v("\n        "+t._s(t.answer)+"\n    ")])],1)},staticRenderFns:[]};var kt=a("VU/8")(bt,yt,!1,function(t){a("xZ2i")},"data-v-6af887ef",null).exports,wt=a("7+uW"),It=a("/ocq");wt.default.use(It.a);var Ct=new It.a({routes:[{path:"/",name:"HelloWorld",component:o},{path:"/MainPage",name:"MainPage",component:x,redirect:"/MainPage/taskSearch",children:[{path:"/MainPage/taskSearch",name:"taskSearch",component:S},{path:"/MainPage/taskRelease",name:"taskRelease",component:L},{path:"/MainPage/myAcceptTask",name:"myAcceptTask",component:h},{path:"/MainPage/myReleaseTask",name:"myReleaseTask",component:p},{path:"/MainPage/groupSearch",name:"groupSearch",component:R},{path:"/MainPage/myGroup",name:"myGroup",component:q},{path:"/MainPage/createGroup",name:"createGroup",component:z},{path:"/MainPage/taskDetail/:id",name:"taskDetail",component:c},{path:"/MainPage/groupDetail/:id",name:"groupDetail",component:X},{path:"/MainPage/groupDetail/:id/modifyInfo",name:"modifyGroupInfo",component:at},{path:"/MainPage/questionnaire/:url",name:"questionnaire",component:kt}]},{path:"/personalPage",name:"personalPage",component:w,children:[{path:"/personalPage/personalInfo",name:"personalInfo",component:b},{path:"/personalPage/deposit",name:"deposit",component:vt},{path:"/personalPage/withdraw",name:"withdraw",component:ft}]},{path:"/login",name:"login",component:ot},{path:"/register",name:"register",component:ut},{path:"/user/:username",name:"userInfo",component:pt}]}),xt=a("7+uW"),Tt=a("BTaQ"),$t=a.n(Tt),St=a("+skl"),Mt=(a.n(St),a("mtWM")),Ft=a.n(Mt);xt.default.config.productionTip=!1,Ft.a.defaults.baseURL="http://localhost:3000/dist/",Ft.a.defaults.withCredentials=!0,xt.default.prototype.$axios=Ft.a,xt.default.use($t.a),new xt.default({el:"#app",router:Ct,axios:Ft.a,components:{App:n},template:"<App/>"})},NsOP:function(t,e){},SPSM:function(t,e){},XYsA:function(t,e){},bNU1:function(t,e,a){t.exports=a.p+"static/img/coin.1b6bb15.jpg"},bUjZ:function(t,e){},cI5A:function(t,e){},jxOF:function(t,e){},nW86:function(t,e){},"tU/7":function(t,e){},xZ2i:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0527f9b1e77f407f47b9.js.map